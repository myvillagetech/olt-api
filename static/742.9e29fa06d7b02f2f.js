"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[742],{1742:(T,l,a)=>{a.r(l),a.d(l,{AdminDashboardModule:()=>C});var u=a(6895),c=a(7861),r=a(2912),t=a(4650),g=a(1435),p=a(6864),h=a(2210);function m(o,i){if(1&o&&(t.TgZ(0,"tbody")(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&o){const e=i.$implicit;t.xp6(3),t.Oqu(e.firstName),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.hoursSpent?e.hoursSpent:0)}}function v(o,i){if(1&o&&(t.TgZ(0,"tbody")(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&o){const e=i.$implicit;t.xp6(3),t.Oqu(e.firstName),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.phone)}}function b(o,i){if(1&o&&(t.TgZ(0,"div",5)(1,"div",24)(2,"div",25)(3,"div",5)(4,"div",26)(5,"div",7)(6,"div",27)(7,"h4",28),t._uU(8,"Schedule Metrics"),t.qZA()(),t.TgZ(9,"div",29)(10,"div",8)(11,"div",30),t._UZ(12,"p-chart",31),t.qZA()()()()(),t.TgZ(13,"div",26)(14,"div",7)(15,"div",27)(16,"h4",28),t._uU(17,"User Metrics"),t.qZA()(),t.TgZ(18,"div")(19,"div",8)(20,"div",30),t._UZ(21,"p-chart",31),t.qZA()()()()()(),t.TgZ(22,"div",5)(23,"div",32)(24,"div",33)(25,"div",27)(26,"h4",28),t._uU(27,"Tutors"),t.qZA()(),t.TgZ(28,"div",8)(29,"div",34)(30,"table",35)(31,"thead")(32,"tr")(33,"th"),t._uU(34,"Name"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Email"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Hours Spent"),t.qZA()()(),t.YNc(39,m,8,3,"tbody",36),t.qZA()()(),t.TgZ(40,"div",37)(41,"h4",38),t._uU(42,"View all tutors >"),t.qZA()()()(),t.TgZ(43,"div",32)(44,"div",33)(45,"div",27)(46,"h4",28),t._uU(47,"Students"),t.qZA()(),t.TgZ(48,"div",8)(49,"div",34)(50,"table",35)(51,"thead")(52,"tr")(53,"th"),t._uU(54,"Name"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Email"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Phone"),t.qZA()()(),t.YNc(59,v,8,3,"tbody",36),t.qZA()()(),t.TgZ(60,"div",37)(61,"h4",38),t._uU(62,"View all students >"),t.qZA()()()()()()()()),2&o){const e=t.oxw();t.xp6(12),t.Q6J("data",e.data)("options",e.options),t.xp6(9),t.Q6J("data",e.tutorData)("options",e.optionsData),t.xp6(18),t.Q6J("ngForOf",null==e.tutorsList?null:e.tutorsList.slice(0,6)),t.xp6(2),t.Q6J("routerLink","/admin/tutor-list"),t.xp6(18),t.Q6J("ngForOf",null==e.studentsList?null:e.studentsList.slice(0,6)),t.xp6(2),t.Q6J("routerLink","/admin/student-list")}}const A=[{path:"",component:(()=>{class o{constructor(e,n){this.dashboardService=e,this.schedulesService=n,this.years=[2023,2022]}ngOnInit(){this.getAllStudents(),this.getAllTutors(),this.getAdminScheduleCount(),this.getAllUserCounts(),this.getTotalRevenue(),this.getStatusChartmetricsCount(),this.updatePieChart(),this.getMonthlyStatistics("2023")}getAllStudents(){this.dashboardService.getAllStudents().subscribe(e=>{this.studentsList=e.allStudents})}getAllUserCounts(){this.dashboardService.getAllUserCounts().subscribe(e=>{this.userMetrics=e.usersCount,this.updatePieChart()})}getTotalRevenue(){this.dashboardService.getTotalRevenue().subscribe(e=>{this.totalRevenue=e.amount[0]})}getAllTutors(){this.dashboardService.getAllTutors().subscribe(e=>{this.tutorsList=e.allTutors,this.updatePieChart(),this.getAllTutoringHours()})}getAllTutoringHours(){this.dashboardService.getTotalTutoringHours().subscribe(e=>{for(const n of e)for(const s of this.tutorsList)if(n.tutorId===s._id){s.hoursSpent=n.hoursSpent;break}})}getAdminScheduleCount(){this.schedulesService.getAdminScheduleCount().subscribe(e=>{this.adminScheduleCount=e.schedule[0]})}onSelectYear(e){this.getMonthlyStatistics(e.value)}getStatusChartmetricsCount(){let e=[0,0,0,0,0],n=["REQUESTED","ACCEPTED","CONFIRMED","REJECTED","CANCELLED"];this.schedulesService.getAdminScheduleCount().subscribe(s=>{s.schedule[0].statusMetrics.forEach(d=>{switch(d.status){case"REQUESTED":e[0]=d.count;break;case"ACCEPTED":e[1]=d.count;break;case"CONFIRMED":e[2]=d.count;break;case"REJECTED":e[3]=d.count;break;case"CANCELLED":e[4]=d.count}}),this.data={labels:n,datasets:[{data:e,backgroundColor:["#f39c12","rgb(15 67 183 )","rgba(15, 183, 107)","rgba(242, 17, 54)","rgba(242, 17, 54)"]}]}})}getMonthlyStatistics(e){this.dashboardService.getMonthlyStatistics(e).subscribe(n=>{const s=getComputedStyle(document.documentElement);this.monthlyStatistics={labels:["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Payments",backgroundColor:s.getPropertyValue("--blue-500"),borderColor:s.getPropertyValue("--blue-500"),data:n.amount.payments},{label:"Payouts",backgroundColor:s.getPropertyValue("--pink-500"),borderColor:s.getPropertyValue("--pink-500"),data:n.amount.payouts}]}})}updatePieChart(){this.studentsList&&this.userMetrics&&(this.tutorData={labels:["Students","Tutors"],datasets:[{data:[this.userMetrics.students,this.userMetrics.tutors],backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"]}]},this.optionsData={responsive:!0,maintainAspectRatio:!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.s),t.Y36(p.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-admin-dashboard"]],decls:66,vars:9,consts:[[1,"page-wrapper"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-xl-3","col-sm-6","col-12"],[1,"card"],[1,"card-body"],[1,"dash-widget-header"],[1,"dash-widget-icon","text-success"],[1,"fa","fa-credit-card"],[1,"dash-count"],[1,"dash-widget-info"],[1,"text-muted"],[1,"dash-widget-icon","text-primary","border-primary"],[1,"fa","fa-users"],[1,"dash-widget-icon","text-warning","border-warning"],[1,"fa","fa-folder"],[1,"card-header","Revenue_chart"],[1,"form-control-label"],[3,"options","onChange"],["width","1200px","height","300px","type","bar",3,"data","options"],["class","row",4,"ngIf"],[1,"col"],[1,"card-chart"],[1,"col-md-6"],[1,"card-header"],[1,"card-title"],[1,""],[1,"chartcard"],["type","pie",3,"data","options"],[1,"col-md-6","d-flex"],[1,"card","card-table","flex-fill"],[1,"table-responsive"],[1,"table","table-hover","table-center","mb-0"],[4,"ngFor","ngForOf"],[1,"card-footer","d-flex","justify-content-end"],[1,"viewAll",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),t._uU(4,"Dashboard"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"Admin"),t.qZA()(),t.TgZ(7,"div")(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"span",10),t._UZ(14,"i",11),t.qZA(),t.TgZ(15,"div",12)(16,"h3"),t._uU(17),t.qZA()()(),t.TgZ(18,"div",13)(19,"h6",14),t._uU(20,"Appointments"),t.qZA()()()()(),t.TgZ(21,"div",6)(22,"div",7)(23,"div",8)(24,"div",9)(25,"span",15),t._UZ(26,"i",16),t.qZA(),t.TgZ(27,"div",12)(28,"h3"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",13)(31,"h6",14),t._uU(32,"Tutors"),t.qZA()()()()(),t.TgZ(33,"div",6)(34,"div",7)(35,"div",8)(36,"div",9)(37,"span",15),t._UZ(38,"i",16),t.qZA(),t.TgZ(39,"div",12)(40,"h3"),t._uU(41),t.qZA()()(),t.TgZ(42,"div",13)(43,"h6",14),t._uU(44,"Students"),t.qZA()()()()(),t.TgZ(45,"div",6)(46,"div",7)(47,"div",8)(48,"div",9)(49,"span",17),t._UZ(50,"i",18),t.qZA(),t.TgZ(51,"div",12)(52,"h3"),t._uU(53),t.qZA()()(),t.TgZ(54,"div",13)(55,"h6",14),t._uU(56,"Revenue"),t.qZA()()()()()(),t.TgZ(57,"div",7)(58,"div",19)(59,"div")(60,"label",20),t._uU(61,"Year"),t.qZA(),t.TgZ(62,"p-dropdown",21),t.NdJ("onChange",function(d){return n.onSelectYear(d)}),t.qZA()()(),t.TgZ(63,"div",8),t._UZ(64,"p-chart",22),t.qZA()(),t.YNc(65,b,63,8,"div",23),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("routerLink","/student/dashboard"),t.xp6(14),t.Oqu((null==n.adminScheduleCount?null:n.adminScheduleCount.totalDocuments)||0),t.xp6(12),t.Oqu(n.userMetrics&&n.userMetrics.tutors||0),t.xp6(12),t.Oqu(n.userMetrics&&n.userMetrics.students||0),t.xp6(12),t.hij("$ ",n.totalRevenue&&n.totalRevenue.totalAmountReceived||0,"0."),t.xp6(9),t.Q6J("options",n.years),t.xp6(2),t.Q6J("data",n.monthlyStatistics)("options",n.options),t.xp6(1),t.Q6J("ngIf",n.adminScheduleCount&&0!==n.adminScheduleCount.statusMetrics.length))},dependencies:[u.sg,u.O5,r.rH,r.yS,c.C,h.Lt],styles:[".page-wrapper[_ngcontent-%COMP%]{margin-left:0;padding-top:0}.status[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem}.dashboard_status[_ngcontent-%COMP%]{border:1px solid rgba(183,183,183,.05);flex-direction:column;align-items:flex-start;padding:1rem}.rejected[_ngcontent-%COMP%]{background-color:#f211361f;color:#e63c3c}.reject[_ngcontent-%COMP%]{background:rgb(183 78 23 / .12);color:#ea580c}H4[_ngcontent-%COMP%], H6[_ngcontent-%COMP%]{color:inherit}.viewAll[_ngcontent-%COMP%]{cursor:pointer}.viewAll[_ngcontent-%COMP%]:hover{color:#183462}.chartcard[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.Revenue_chart[_ngcontent-%COMP%]{display:flex;justify-content:end;border-bottom:none}.dash-count[_ngcontent-%COMP%]{margin:auto}.dash-count[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:38px;margin:0;color:#444242}a[_ngcontent-%COMP%]{color:#000}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.Bz.forChild(A),r.Bz]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,Z,c.S,h.kW]}),o})()}}]);