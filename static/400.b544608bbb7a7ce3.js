"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[400],{2058:(T,h,a)=>{a.d(h,{K:()=>d});var u=a(4650),p=a(6557),c=a(791);let d=(()=>{class e{constructor(r,f){this.httpDataService=r,this.storageService=f}getLogedinUserDetails(){return this.httpDataService.get(`user/${this.storageService.getDataFromLocalStorage("id")}`)}getUserDetails(r){return this.httpDataService.get(`user/${r}`)}}return e.\u0275fac=function(r){return new(r||e)(u.LFG(p.L),u.LFG(c.V))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1400:(T,h,a)=>{a.d(h,{B:()=>pe});var u=a(2887),p=a(7914),c=(()=>{return(i=c||(c={})).STUDENT="Student",i.TUTOR="Tutor",i.ADMIN="Admin",c;var i})(),d=a(5622),e=a(4650),_=a(2912),r=a(6864),f=a(4946),x=a(7185),S=a(9886),b=a(791),C=a(792),Z=a(2735),A=a(2058),m=a(6895),v=a(4006),U=a(5047),E=a(1493);function y(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._UZ(3,"i",9),e.qZA(),e.TgZ(4,"div",10)(5,"h4",11),e._uU(6),e.qZA(),e.TgZ(7,"p",12),e._uU(8),e.qZA()(),e.TgZ(9,"div",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearFile())}),e._UZ(10,"i",14),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.hij(" ",null==t.files[0]?null:t.files[0].name," "),e.xp6(2),e.hij(" ",t.formatBytes(null==t.files[0]?null:t.files[0].size)," ")}}let N=(()=>{class i{constructor(){this.updatedFilesDescription=new e.vpe,this.value=!1,this.files=[]}onFileDropped(t){this.prepareFilesList(t)}ngOnChanges(t){t.clearAttachments.currentValue&&(this.files=[])}clearFiles(){this.files=[]}fileBrowseHandler(t){this.prepareFilesList(t)}deleteFile(t){this.files.splice(t,1);const n=new DataTransfer;for(let s=0;s<this.filesEvent.target.files.length;s++){const o=this.filesEvent.target.files[s];t!==s&&n.items.add(o)}this.filesEvent.target.files=n.files,this.updatedFilesDescription.emit(this.files)}prepareFilesList(t){this.files=t?.target.files,this.updatedFilesDescription.emit(this.files),this.filesEvent=t}formatBytes(t,n){if(0===t)return"0 Bytes";const o=n<=0?0:n||2,g=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,g)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][g]}clearFile(){this.files=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fileuploader"]],inputs:{value:"value",clearAttachments:"clearAttachments"},outputs:{updatedFilesDescription:"updatedFilesDescription"},features:[e.TTD],decls:11,vars:1,consts:[["appDnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef","accept","application/pdf,application/vnd.ms-excel, image/gif, image/jpeg, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword application/vnd.ms-powerpoint",3,"change"],["fileDropRef",""],["aria-hidden","true",1,"fa","fa-upload"],["for","fileDropRef"],["class","files-list",4,"ngIf"],[1,"files-list"],[1,"single-file"],[1,"file-icon",2,"width","50px"],["aria-hidden","true",1,"fa","fa-file"],[1,"info"],[1,"name"],[1,"size"],[1,"delete",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("fileDropped",function(o){return n.onFileDropped(o)}),e.TgZ(1,"input",1,2),e.NdJ("change",function(o){return n.fileBrowseHandler(o)}),e.qZA(),e._UZ(3,"i",3),e.TgZ(4,"h3"),e._uU(5,"Drag and drop file here"),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"or"),e.qZA(),e.TgZ(8,"label",4),e._uU(9,"Browse for file"),e.qZA()(),e.YNc(10,y,11,2,"div",5)),2&t&&(e.xp6(10),e.Q6J("ngIf",n.files.length>0))},dependencies:[m.O5],styles:[".container[_ngcontent-%COMP%]{padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:0 auto;background-color:#fff}input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0;cursor:pointer}label[_ngcontent-%COMP%]{color:#fff;border-radius:21.5px;background-color:#db202f;padding:8px 16px}h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem;background-color:#fff}.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end;display:flex;flex-grow:1}.name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.info[_ngcontent-%COMP%]{width:100%}"]}),i})();function I(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ul",41)(1,"li",42)(2,"a",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.navigateToBackPages("dashboard"))}),e._uU(3,"Dashboard"),e.qZA()(),e.TgZ(4,"li",42)(5,"a",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.navigateToBackPages("schedules"))}),e._uU(6,"Schedules"),e.qZA()(),e.TgZ(7,"li",44),e._uU(8,"Schedule Details"),e.qZA()()}}function q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ul",41)(1,"li",42)(2,"a",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.navigateToBackPages("dashboard"))}),e._uU(3,"Dashboard"),e.qZA()(),e.TgZ(4,"li",42)(5,"a",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.navigateToPayouts("payout"))}),e._uU(6,"Payouts"),e.qZA()(),e.TgZ(7,"li",44),e._uU(8,"Schedule Details"),e.qZA()()}}function J(i,l){if(1&i&&(e.TgZ(0,"div",45),e._UZ(1,"img",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.userProfilePhoto,e.LSH)}}function P(i,l){if(1&i&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.sharedService.getNameInitials(null==t.displayDetails?null:t.displayDetails.firstName,null==t.displayDetails?null:t.displayDetails.lastName)," ")}}function M(i,l){if(1&i&&(e.TgZ(0,"p",51),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.tutorDetails.title," ")}}function w(i,l){if(1&i&&(e.TgZ(0,"p",51),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.tutorDetails.description," ")}}function F(i,l){if(1&i&&(e.TgZ(0,"div",53)(1,"p",54),e._uU(2,"Contact Address"),e.qZA(),e.TgZ(3,"div",55)(4,"p",56),e._UZ(5,"i",57),e._uU(6),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.tutorDetails.address," ")}}function k(i,l){if(1&i&&(e.TgZ(0,"div",48)(1,"h4",49),e._uU(2),e.qZA(),e.YNc(3,M,2,1,"p",50),e.YNc(4,w,2,1,"p",50),e.TgZ(5,"p",51),e._uU(6),e.qZA(),e.YNc(7,F,7,1,"div",52),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.AsE(" ",t.displayDetails.firstName," ",t.displayDetails.lastName," "),e.xp6(1),e.Q6J("ngIf","student"===t.logedinUserRole),e.xp6(1),e.Q6J("ngIf","student"===t.logedinUserRole),e.xp6(2),e.hij(" ",t.displayDetails.email," "),e.xp6(1),e.Q6J("ngIf",t.isTutor||"admin"===t.logedinUserRole)}}function L(i,l){if(1&i&&(e.TgZ(0,"p",51),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.scheduleDetails?null:t.scheduleDetails.rejectedNote," ")}}function Q(i,l){if(1&i&&(e.TgZ(0,"div",60)(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,L,2,1,"p",50),e.TgZ(4,"span",61),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Tol(t.statusClass(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.hij(" ",null==t.scheduleDetails?null:t.scheduleDetails.status," "),e.xp6(1),e.Q6J("ngIf","CANCELLED"===(null==t.scheduleDetails?null:t.scheduleDetails.status)||"REJECTED"===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(2),e.hij("$",t.tutorDetails.hourlyRate," / Hour")}}function R(i,l){if(1&i&&(e.TgZ(0,"div",58),e.YNc(1,Q,6,5,"div",59),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.scheduleDetails)}}function Y(i,l){if(1&i&&(e.TgZ(0,"div",58)(1,"h3"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Tol(t.statusClass(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.hij(" ",null==t.scheduleDetails?null:t.scheduleDetails.status," ")}}function O(i,l){if(1&i&&(e.TgZ(0,"div",58)(1,"h4",62),e._uU(2,"Total Amount Be Paid "),e.qZA(),e.TgZ(3,"h1",63),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij("$ ",t.totalAmountTobePaid,"")}}function B(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2,"Total Amount"),e.qZA(),e.TgZ(3,"p-inputNumber",65),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.totalAmountTobePaid=s)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.totalAmountTobePaid)}}function j(i,l){if(1&i&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Total Amount To be Paid "),e.qZA(),e.TgZ(3,"h3",66),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" $",null!=t.scheduleDetails&&t.scheduleDetails.amount?null==t.scheduleDetails?null:t.scheduleDetails.amount:t.totalAmountTobePaid," ")}}function H(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"a",67),e._uU(2,"Start Meeting"),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("href",t.scheduleDetails.meetingStartUrl,e.LSH)}}function K(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",68),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.acceptSchedule(s.statusList.ACCEPTED))}),e._uU(2,"Accept"),e.qZA(),e.TgZ(3,"button",69),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateSchedule(s.statusList.REJECTED))}),e._uU(4,"Reject"),e.qZA(),e.BQk()}}function G(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",68),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateSchedule(s.statusList.CANCELLED))}),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",69),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateSchedule(s.statusList.REJECTED))}),e._uU(4,"Reject"),e.qZA(),e.BQk()}}function $(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",68),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.acceptSchedule(s.statusList.ACCEPTED))}),e._uU(2,"Accept"),e.qZA(),e.TgZ(3,"button",70),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateSchedule(s.statusList.CANCELLED))}),e._uU(4,"Cancel"),e.qZA(),e.BQk()}}function z(i,l){if(1&i&&(e.TgZ(0,"div",7)(1,"div",26)(2,"h4"),e._uU(3,"Amount and Actions"),e.qZA()(),e.TgZ(4,"div",8)(5,"div",64),e.YNc(6,B,4,1,"div",34),e.YNc(7,j,5,1,"div",34),e.TgZ(8,"div"),e.YNc(9,H,3,1,"ng-container",34),e.qZA(),e.TgZ(10,"div"),e.YNc(11,K,5,0,"ng-container",34),e.YNc(12,G,5,0,"ng-container",34),e.YNc(13,$,5,0,"ng-container",34),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.statusList.REQUESTED===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.Q6J("ngIf",t.statusList.REQUESTED!==(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(2),e.Q6J("ngIf",null==t.scheduleDetails?null:t.scheduleDetails.meetingStartUrl),e.xp6(2),e.Q6J("ngIf",t.statusList.REQUESTED===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.Q6J("ngIf",t.statusList.ACCEPTED===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.Q6J("ngIf",t.statusList.REJECTED===(null==t.scheduleDetails?null:t.scheduleDetails.status))}}function V(i,l){1&i&&(e.TgZ(0,"li",19)(1,"a",71),e._uU(2,"Notes"),e.qZA()())}function W(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"a",67),e._uU(2,"Join here"),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("href",null==t.scheduleDetails?null:t.scheduleDetails.meetingLink,e.LSH)}}function X(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",75),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.navigateToPayment())}),e._uU(1,"Procced To Payment"),e.qZA()}}function ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateSchedule(s.statusList.CANCELLED))}),e._uU(1,"Cancel Schedule"),e.qZA()}}function te(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.updateSchedule(s.statusList.REQUESTED))}),e._uU(1,"Request Schedule"),e.qZA()}}function ie(i,l){if(1&i&&(e.TgZ(0,"div",7)(1,"div",26)(2,"h4"),e._uU(3,"Amount and Actions"),e.qZA()(),e.TgZ(4,"div",8)(5,"div",64)(6,"div")(7,"h4"),e._uU(8,"Total Amount To be Paid"),e.qZA(),e.TgZ(9,"h3",66),e._uU(10),e.qZA()(),e.TgZ(11,"div"),e.YNc(12,W,3,1,"ng-container",34),e.qZA(),e.TgZ(13,"div"),e.YNc(14,X,2,0,"button",72),e.YNc(15,ee,2,0,"button",73),e.YNc(16,te,2,0,"button",74),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(10),e.hij(" $ ",null!=t.scheduleDetails&&t.scheduleDetails.amount?null==t.scheduleDetails?null:t.scheduleDetails.amount:t.totalAmountTobePaid," "),e.xp6(2),e.Q6J("ngIf",null==t.scheduleDetails?null:t.scheduleDetails.meetingLink),e.xp6(2),e.Q6J("ngIf",(null==t.scheduleDetails?null:t.scheduleDetails.status)===t.statusList.ACCEPTED),e.xp6(1),e.Q6J("ngIf",(null==t.scheduleDetails?null:t.scheduleDetails.status)!==t.statusList.CANCELLED),e.xp6(1),e.Q6J("ngIf",(null==t.scheduleDetails?null:t.scheduleDetails.status)===t.statusList.CANCELLED)}}function ne(i,l){if(1&i&&(e.TgZ(0,"div",79)(1,"div")(2,"h5"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()()()),2&i){const t=l.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(e.xi3(4,3,t.date,"MMM d, y")),e.xp6(3),e.AsE(" ",n.timeValues[t.from]," - ",n.timeValues[t.to]," ")}}function se(i,l){if(1&i&&(e.TgZ(0,"div",77),e.YNc(1,ne,7,6,"div",78),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.scheduleDetails.slots)}}function le(i,l){1&i&&e._UZ(0,"hr")}function ae(i,l){if(1&i&&(e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p",82),e._uU(4),e.qZA(),e.YNc(5,le,1,0,"hr",34),e.qZA()),2&i){const t=l.$implicit,n=l.last;e.xp6(2),e.Oqu(t.courseName),e.xp6(2),e.Oqu(t.courseDiscription),e.xp6(1),e.Q6J("ngIf",!n)}}function oe(i,l){if(1&i&&(e.TgZ(0,"div",80)(1,"h4",27),e._uU(2,"Course Details"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,ae,6,3,"div",81),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.scheduleDetails.subjects)}}function ce(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",7)(2,"div",7)(3,"div",84)(4,"label",85),e._uU(5,"Notes"),e.qZA(),e.TgZ(6,"textarea",86),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.notes=s)}),e.qZA(),e.TgZ(7,"div",87)(8,"button",88),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveNotes())}),e._uU(9," Save "),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.notes),e.xp6(2),e.Q6J("disabled",!t.notes)}}function de(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",26)(2,"h4"),e._uU(3,"Add Attachments :"),e.qZA()(),e.TgZ(4,"div",8)(5,"app-fileuploader",89),e.NdJ("updatedFilesDescription",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.updatedFilesDescription(s))}),e.qZA(),e.TgZ(6,"div",90)(7,"button",91),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.uploadDocument())}),e._uU(8," uploadDocument "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("clearAttachments",t.clearAttachments),e.xp6(2),e.Q6J("disabled",0==t.fileAttachmments.length)}}function ue(i,l){if(1&i&&(e.TgZ(0,"div",94)(1,"a",67),e._UZ(2,"i",95),e.TgZ(3,"div"),e._uU(4),e.qZA()()()),2&i){const t=l.$implicit;e.xp6(1),e.s9C("href",null==t?null:t.url,e.LSH),e.xp6(3),e.Oqu(null==t?null:t.name)}}function re(i,l){if(1&i&&(e.TgZ(0,"div",33)(1,"div")(2,"div",26)(3,"h4"),e._uU(4,"Attachments"),e.qZA()(),e.TgZ(5,"div",8)(6,"div",92),e.YNc(7,ue,5,2,"div",93),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",null==t.scheduleDetails?null:t.scheduleDetails.attachments)}}function he(i,l){1&i&&(e.TgZ(0,"div",96)(1,"h4",97),e._uU(2,"No Attachments Found"),e.qZA()())}let pe=(()=>{class i{constructor(t,n,s,o,D,g,_e,me,ge,fe,ve){this.router=t,this.activatedRoute=n,this.sharedSchedulesService=s,this.studentSchedulesService=o,this.toastrService=D,this.modalService=g,this.SchedulesService=_e,this.storageService=me,this.sharedService=ge,this.studentProfileService=fe,this.userService=ve,this.scheduleId="",this.timeValues=p.a,this.statusList=d.q,this.logedinUserRole="tutor",this.userProfilePhoto="",this.isTutor=!1,this.slots=[],this.totalAmountTobePaid=0,this.visible=!1,this.fileAttachmments=[],this.attachments=[]}ngOnInit(){const t=this.storageService.getDataFromLocalStorage("role");this.logedinUserRole=t===c.TUTOR?"tutor":t===c.ADMIN?"admin":"student",this.isTutor=t===c.TUTOR,this.activatedRoute.queryParams.subscribe(n=>{this.scheduleId=n.sid}),this.scheduleId&&""!==this.scheduleId&&this.getSchedulesDetailsByScheduleId()}getSchedulesDetailsByScheduleId(){this.sharedSchedulesService.getSchedulesByScheduleId(this.scheduleId).subscribe(t=>{this.scheduleDetails=t?.schedule,this.notes=t.schedule.notes,this.tutorDetails=t?.schedule?.tutor[0],this.tutorId=this.tutorDetails._id,this.displayDetails="student"===this.logedinUserRole?t?.schedule?.tutor[0]:t?.schedule?.student[0],this.slots=t?.schedule?.slots,this.userProfilePhoto=this.displayDetails?.photoUrl?this.displayDetails?.photoUrl:void 0,this.calculateTotalAmount(),this.isTutor||this.getUserDetails(this.tutorDetails.userId)})}getUserDetails(t){this.userService.getUserDetails(t).subscribe(n=>{n.existingUser?.photoUrl&&(this.userProfilePhoto=n.existingUser?.photoUrl)})}statusClass(t){return t===d.q.ACCEPTED?"confirm":t===d.q.REQUESTED?"pending":t===d.q.CANCELLED||t===d.q.REJECTED?"reject":t===d.q.COMPLETED||t===d.q.CONFIRMED?"accept":""}navigateToPayment(){this.studentSchedulesService.updateSelectedScheduleDetails(this.scheduleDetails),this.studentSchedulesService.updateAmount(this.scheduleDetails.amount),this.router.navigate(["/payment-page"])}updateSchedule(t){this.action=t,"CANCELLED"==t&&(this.message="Reason to Cancel Schedule",this.visible=!0),"REJECTED"==t&&(this.message="Reason to Reject Schedule",this.visible=!0),"REQUESTED"===t&&this.requestSchedule()}cancelOrRejectScheduleReason(){this.visible=!1;const t={id:this.scheduleDetails._id,reason:this.reason};"CANCELLED"==this.action&&(this.SchedulesService.cancelSchedule(t).subscribe(),this.getSchedulesDetailsByScheduleId()),"REJECTED"==this.action&&(this.SchedulesService.rejectSchedule(t).subscribe(),this.getSchedulesDetailsByScheduleId()),this.reason=""}acceptSchedule(t){const n={id:this.scheduleDetails._id,amount:this.totalAmountTobePaid};this.modalRef=this.modalService.show(u.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Processed with Accepting the schedule with $${this.totalAmountTobePaid} ?`}}),this.modalRef.content.onClose.subscribe(s=>{s&&this.SchedulesService.updateAcceptStatus(n).subscribe(o=>{this.toastrService.success(o.message),this.getSchedulesDetailsByScheduleId()},o=>{this.toastrService.error(o.error.message??"unable to update! Please try again later")})})}navigateToBackPages(t){this.router.navigate([`/${this.logedinUserRole}/${t}`])}calculateTotalAmount(){let t=0;for(let n=0;n<this.slots.length;n++)t+=(this.slots[n].to-this.slots[n].from)/2*this.tutorDetails.hourlyRate;this.totalAmountTobePaid=t}navigateToPayouts(t){this.router.navigate([`/${this.logedinUserRole}/${t}`])}editSchedule(){this.router.navigate(["./student/courses/schedule"],{queryParams:{id:this.tutorId,sid:this.scheduleDetails._id}})}requestSchedule(){this.modalRef=this.modalService.show(u.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:"Are you sure to Request this schedule again"}}),this.modalRef.content.onClose.subscribe(t=>{t&&this.SchedulesService.requestSchedule(this.scheduleDetails._id).subscribe(n=>{this.toastrService.success(n.message),this.getSchedulesDetailsByScheduleId()},n=>{this.toastrService.error(n.error.message??"unable to update! Please try again later")})})}saveNotes(){this.SchedulesService.addNotes(this.scheduleDetails._id,{notes:this.notes}).subscribe(t=>{this.getSchedulesDetailsByScheduleId()})}updatedFilesDescription(t){this.fileAttachmments=t}uploadDocument(){this.studentProfileService.uploadFiletourl(this.fileAttachmments[0].name,this.fileAttachmments[0].type,"Schedule-attchemet",this.scheduleId).subscribe(n=>{if(n?.uploadUrl){const s=n.uploadUrl.split("?");this.attachments=[{url:s[0],name:this.fileAttachmments[0].name,type:this.fileAttachmments[0].type,size:this.fileAttachmments[0].size}],this.studentProfileService.updateFileInS3(n.uploadUrl,this.fileAttachmments[0].type,this.fileAttachmments[0]).subscribe(o=>{this.saveAttachments()})}})}saveAttachments(){this.SchedulesService.addAttachments(this.scheduleDetails._id,this.attachments).subscribe(t=>{this.clearAttachments=[],this.fileAttachmments=[],this.getSchedulesDetailsByScheduleId()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(r.F),e.Y36(f.g),e.Y36(x._W),e.Y36(S.tT),e.Y36(r.F),e.Y36(b.V),e.Y36(C.F),e.Y36(Z.J),e.Y36(A.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-schedule-details"]],decls:61,vars:22,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],["class","breadcrumb",4,"ngIf"],[1,"card","mb-2"],[1,"content","mx-2"],[1,"card"],[1,"card-body"],[1,"mentor-widget"],[1,"user-info-left","align-items-center"],[1,"mentor-img","d-flex","flex-wrap","justify-content-center"],["class","user-img",4,"ngIf"],["class","pro-avatar",4,"ngIf"],["class","user-info-cont",4,"ngIf"],["class","user-info-right d-flex align-items-end flex-wrap",4,"ngIf"],["class","card",4,"ngIf"],[1,"profile-menu"],[1,"nav","nav-tabs","nav-tabs-solid"],[1,"nav-item"],["data-bs-toggle","tab","data-bs-target","#about","id","",1,"nav-link","active"],["class","nav-item",4,"ngIf"],["data-bs-toggle","tab","data-bs-target","#pass",1,"nav-link"],[1,"tab-content","profile-tab-cont"],["id","about",1,"tab-pane","fade","show","active"],[1,"col-lg-12"],[1,"card-header"],[1,"widget-title"],["class","d-flex wrap",4,"ngIf"],[1,"card-body","custom-border-card","pb-0"],["class","widget about-widget custom-about mb-0",4,"ngIf"],["class","tab-pane fade","id","notes",4,"ngIf"],["id","pass",1,"tab-pane","fade"],[1,"card","mt-2"],[4,"ngIf"],["class","card mt-2",4,"ngIf"],["class","text-center",4,"ngIf"],[3,"header","modal","draggable","visible","visibleChange"],["cols","100","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-lg","mt-2",3,"click"],[1,"breadcrumb"],[1,"breadcrumb-item","cursor"],[3,"click"],[1,"breadcrumb-item","active"],[1,"user-img"],["alt","User Image",1,"User_Image",3,"src"],[1,"pro-avatar"],[1,"user-info-cont"],[1,"usr-name"],["class","mentor-type",4,"ngIf"],[1,"mentor-type"],["class","mentor-action",4,"ngIf"],[1,"mentor-action"],[1,"mentor-type","social-title"],[1,"mentor-details","m-0"],[1,"user-location","m-0"],[1,"fas","fa-map-marker-alt"],[1,"user-info-right","d-flex","align-items-end","flex-wrap"],["class","hireme-btn text-center",4,"ngIf"],[1,"hireme-btn","text-center"],[1,"hire-rate","mt-2"],[1,"label-color"],[1,"total-amount"],[1,"d-flex","justify-content-between"],["inputId","integeronly",3,"ngModel","ngModelChange"],[2,"color","green"],["target","_blank",3,"href"],["type","button",1,"btn","btn-primary","btn-lg","me-1",3,"click"],["type","button",1,"btn","btn-danger","btn-lg",3,"click"],["type","button",1,"btn","btn-danger","btn-lg","m-1",3,"click"],["data-bs-toggle","tab","data-bs-target","#notes",1,"nav-link"],["type","button","class","btn btn-primary btn-lg m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-danger btn-lg m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-warning btn-lg m-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-lg","m-1",3,"click"],["type","button",1,"btn","btn-warning","btn-lg","m-1",3,"click"],[1,"d-flex","wrap"],["class","accept m-1 p-2",4,"ngFor","ngForOf"],[1,"accept","m-1","p-2"],[1,"widget","about-widget","custom-about","mb-0"],[4,"ngFor","ngForOf"],[1,"mb-2"],["id","notes",1,"tab-pane","fade"],[1,"form-group","card-body","mb-0"],[1,"form-control-label"],["type","text","rows","5","placeholder","Take Notes Here",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-end","mt-2"],[1,"btn","btn-lg","btn-primary",3,"disabled","click"],[3,"clearAttachments","updatedFilesDescription"],[1,"container","text-end","mt-2","p-0"],[1,"btn","btn-primary","btn-lg",3,"disabled","click"],[1,"d-flex","gap-2"],["class","attachments",4,"ngFor","ngForOf"],[1,"attachments"],["aria-hidden","true",1,"fa","fa-file"],[1,"text-center"],[1,"text-danger","p-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Schedule Details"),e.qZA(),e.YNc(5,I,9,0,"ul",4),e.YNc(6,q,9,0,"ul",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div")(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),e.YNc(15,J,2,1,"div",12),e.YNc(16,P,2,1,"div",13),e.qZA(),e.YNc(17,k,8,6,"div",14),e.qZA(),e.YNc(18,R,2,1,"div",15),e.YNc(19,Y,3,3,"div",15),e.YNc(20,O,5,1,"div",15),e.qZA()()(),e.TgZ(21,"div"),e.YNc(22,z,14,6,"div",16),e.TgZ(23,"div",17)(24,"ul",18)(25,"li",19)(26,"a",20),e._uU(27,"About"),e.qZA()(),e.YNc(28,V,3,0,"li",21),e.TgZ(29,"li",19)(30,"a",22),e._uU(31,"Attachments"),e.qZA()()()(),e.TgZ(32,"div",23)(33,"div",24)(34,"div",1)(35,"div",25)(36,"div",7)(37,"div",8),e.YNc(38,ie,17,5,"div",16),e.TgZ(39,"div",7)(40,"div",26)(41,"h4",27),e._uU(42,"Slot Details"),e.qZA()(),e.TgZ(43,"div",8),e.YNc(44,se,2,1,"div",28),e.qZA()(),e.TgZ(45,"div",5)(46,"div",29),e.YNc(47,oe,5,1,"div",30),e.qZA()()()()()()(),e.YNc(48,ce,10,2,"div",31),e.TgZ(49,"div",32)(50,"div",33),e.YNc(51,de,9,2,"div",34),e.YNc(52,re,8,1,"div",35),e.YNc(53,he,3,0,"div",36),e.qZA()()()()()()(),e.TgZ(54,"p-dialog",37),e.NdJ("visibleChange",function(o){return n.visible=o}),e.TgZ(55,"div")(56,"div")(57,"textarea",38),e.NdJ("ngModelChange",function(o){return n.reason=o}),e.qZA()(),e.TgZ(58,"div",39)(59,"button",40),e.NdJ("click",function(){return n.cancelOrRejectScheduleReason()}),e._uU(60,"Confirm"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf","admin"!==n.logedinUserRole),e.xp6(1),e.Q6J("ngIf","admin"===n.logedinUserRole),e.xp6(9),e.Q6J("ngIf",n.userProfilePhoto),e.xp6(1),e.Q6J("ngIf",!n.userProfilePhoto),e.xp6(1),e.Q6J("ngIf",n.displayDetails),e.xp6(1),e.Q6J("ngIf","student"===n.logedinUserRole),e.xp6(1),e.Q6J("ngIf",n.isTutor&&n.scheduleDetails),e.xp6(1),e.Q6J("ngIf","admin"===n.logedinUserRole),e.xp6(2),e.Q6J("ngIf",n.isTutor),e.xp6(6),e.Q6J("ngIf",!n.isTutor),e.xp6(10),e.Q6J("ngIf","student"===n.logedinUserRole),e.xp6(6),e.Q6J("ngIf",n.scheduleDetails),e.xp6(3),e.Q6J("ngIf",n.scheduleDetails),e.xp6(1),e.Q6J("ngIf",!n.isTutor),e.xp6(3),e.Q6J("ngIf",n.isTutor),e.xp6(1),e.Q6J("ngIf",(null==n.scheduleDetails?null:n.scheduleDetails.attachments)&&0!==(null==n.scheduleDetails||null==n.scheduleDetails.attachments?null:n.scheduleDetails.attachments.length)),e.xp6(1),e.Q6J("ngIf",!n.scheduleDetails.attachments),e.xp6(1),e.Q6J("header",n.message)("modal",!0)("draggable",!1)("visible",n.visible),e.xp6(3),e.Q6J("ngModel",n.reason))},dependencies:[m.sg,m.O5,v.Fj,v.JJ,v.On,U.Rn,E.V,N,m.uU],styles:[".cursor[_ngcontent-%COMP%]{cursor:pointer}.label-color[_ngcontent-%COMP%]{color:gray}.total-amount[_ngcontent-%COMP%]{color:#0a4d0a}.attachments[_ngcontent-%COMP%]{min-width:200px;padding:1rem;box-shadow:0 10px 30px #181c210d;border-radius:10px;display:flex;flex-direction:column;align-items:center;gap:.5rem;text-align:center}.attachments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem;margin-top:.5rem;color:#789}.user-img[_ngcontent-%COMP%]{align-items:center}.user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%}"]}),i})()},4946:(T,h,a)=>{a.d(h,{g:()=>p});var u=a(4650);let p=(()=>{class c{constructor(){this.amountToBePaid=0}updateSelectedScheduleDetails(e){this.selectedScheduleDetails=e}updateAmount(e){this.amountToBePaid=e}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);