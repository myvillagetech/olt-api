"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[515],{7914:(p,u,o)=>{o.d(u,{D:()=>c,a:()=>d});const d=["1:00","1:30","2:00","2:30","3:00","3:30","4:00","4:30","5:00","5:30","6:00","6:30","7:00","7:30","8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},5622:(p,u,o)=>{o.d(u,{q:()=>d,s:()=>c});var d=(()=>{return(n=d||(d={})).REQUESTED="REQUESTED",n.ACCEPTED="ACCEPTED",n.REJECTED="REJECTED",n.CANCELLED="CANCELLED",n.COMPLETED="COMPLETED",n.CONFIRMED="CONFIRMED",d;var n})();const c=[{value:"REQUESTED",label:"Requested"},{value:"ACCEPTED",label:"Accepted"},{value:"REJECTED",label:"Rejected"},{value:"CANCELLED",label:"Cancelled"},{value:"COMPLETED",label:"Completed"},{value:"CONFIRMED",label:"Confirmed"}]},2058:(p,u,o)=>{o.d(u,{K:()=>m});var d=o(4650),c=o(6557),n=o(791);let m=(()=>{class t{constructor(h,v){this.httpDataService=h,this.storageService=v}getLogedinUserDetails(){return this.httpDataService.get(`user/${this.storageService.getDataFromLocalStorage("id")}`)}getUserDetails(h){return this.httpDataService.get(`user/${h}`)}}return t.\u0275fac=function(h){return new(h||t)(d.LFG(c.L),d.LFG(n.V))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9515:(p,u,o)=>{o.r(u),o.d(u,{TutorDashboardModule:()=>q});var d=o(6895),c=o(2912),n=o(5622),m=o(7914),t=o(4650),T=o(2058),h=o(6864),v=o(791),C=o(792),_=o(7861);function D(a,r){if(1&a&&(t.TgZ(0,"div")(1,"a",29),t._UZ(2,"img",30),t.qZA()()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("src",e.student.photoUrl,t.LSH)}}function E(a,r){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.hij(" ",s.sharedService.getNameInitials(null==e?null:e.student.firstName,null==e?null:e.student.lastName)," ")}}function b(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"h2",25),t.YNc(3,D,3,1,"div",11),t.YNc(4,E,2,1,"div",11),t.TgZ(5,"a"),t._uU(6),t.TgZ(7,"span"),t._uU(8),t.qZA()()()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.TgZ(14,"span",26),t._uU(15),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"button",27),t.NdJ("click",function(){const i=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.navigateToDetailsPage(i._id))}),t._UZ(20,"i",28),t._uU(21," View "),t.qZA()()()}if(2&a){const e=r.$implicit,s=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.student.photoUrl),t.xp6(1),t.Q6J("ngIf",!e.student.photoUrl),t.xp6(2),t.AsE("",e.student.firstName," ",e.student.lastName,""),t.xp6(2),t.Oqu(e.student.email),t.xp6(2),t.Oqu(e.subjects[0].courseName),t.xp6(2),t.hij(" ",t.xi3(13,12,e.slots[0].date,"dd MMM yyyy")," "),t.xp6(3),t.AsE(" ",s.timeValues[e.slots[0].from]," to ",s.timeValues[e.slots[0].to]," "),t.xp6(1),t.Tol(s.statusClass(e.status)),t.xp6(1),t.Oqu(e.status)}}function Z(a,r){if(1&a&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"h4"),t._uU(3,"Today Schedule List"),t.qZA(),t.TgZ(4,"div",21)(5,"div",15)(6,"div",22)(7,"table",23)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"Tutor"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Course"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Slots"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Action"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,b,22,15,"tr",24),t.qZA()()()()()()),2&a){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",e.todayScheduleList)}}function f(a,r){1&a&&(t.TgZ(0,"div",31)(1,"p"),t._uU(2,"No recent updates"),t.qZA()())}function U(a,r){if(1&a&&(t.TgZ(0,"div")(1,"a",29),t._UZ(2,"img",30),t.qZA()()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("src",e.student.photoUrl,t.LSH)}}function S(a,r){if(1&a&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.hij(" ",s.sharedService.getNameInitials(null==e?null:e.student.firstName,null==e?null:e.student.lastName)," ")}}function A(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"h2",25),t.YNc(3,U,3,1,"div",11),t.YNc(4,S,2,1,"div",33),t.TgZ(5,"a"),t._uU(6),t.TgZ(7,"span"),t._uU(8),t.qZA()()()(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",32)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",32)(16,"a",34),t.NdJ("click",function(){const i=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.navigateToStudentSchedules(i._id))}),t._UZ(17,"i",28),t._uU(18," View"),t.qZA()()()}if(2&a){const e=r.$implicit,s=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.student.photoUrl),t.xp6(1),t.Q6J("ngIf",!e.student.photoUrl),t.xp6(2),t.AsE("",e.student.firstName," ",e.student.lastName,""),t.xp6(2),t.Oqu(e.student.email),t.xp6(2),t.Oqu(t.xi3(11,9,e.createdAt,"dd MMM yyyy")),t.xp6(2),t.Tol(s.statusClass(e.status)),t.xp6(2),t.Oqu(e.status)}}function x(a,r){if(1&a&&(t.TgZ(0,"div",21)(1,"div",15)(2,"div",22)(3,"table",23)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Basic Info"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"updated Date"),t.qZA(),t.TgZ(10,"th",32),t._uU(11,"Status"),t.qZA(),t.TgZ(12,"th",32),t._uU(13,"Action"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,A,19,12,"tr",24),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.tutorLatestUpdates)}}const y=[{path:"",component:(()=>{class a{constructor(e,s,l,i,g){this.userService=e,this.schedulesService=s,this.storageService=l,this.router=i,this.sharedService=g,this.amount=[],this.todayScheduleList=[],this.timeValues=m.a}ngOnInit(){this.getUserDetails(),this.tutorId=this.storageService.getDataFromLocalStorage("id"),this.getTutorScheduleCountById(),this.getLatestUpdatedSchedulesBytutorId(),this.getTotalEarned(this.tutorId);let e=new Date,s=new Date;s.setDate(e.getDate()-1),this.getTodayScheduleDetails({from:s,to:e}),this.getStatusChartmetricsCount()}getUserDetails(){this.userService.getLogedinUserDetails().subscribe(e=>{this.userDetails=e.existingUser,this.userService.userDetails=e.existingUser})}getTutorScheduleCountById(){this.schedulesService.getTutorScheduleCountById(this.tutorId).subscribe(e=>{this.tutorSchedulesArray=e.schedule[0]})}getLatestUpdatedSchedulesBytutorId(){this.schedulesService.getLatestUpdatedSchedulesBytutorId(this.tutorId).subscribe(e=>{this.tutorLatestUpdates=e.data})}navigateToStudentSchedules(e){this.router.navigate(["/tutor/schedules/details"],{queryParams:{sid:e}})}getTotalEarned(e){this.schedulesService.getTotalEarned(e).subscribe(s=>{this.amount=s.amount[0]})}getTodayScheduleDetails(e){const s=this.storageService.getDataFromLocalStorage("id");this.schedulesService.getSchedulesBySearchByCriteria({pageNumber:0,pageSize:4,sortField:"",sortOrder:1,studentIds:[],tutorIds:[s],subjects:[],status:"",dateRange:e}).subscribe(i=>{this.todaySchedules=i,this.todayScheduleList=i.data})}navigateToDetailsPage(e){this.router.navigate(["./student/schedules/details"],{queryParams:{sid:e}})}statusClass(e){return e===n.q.ACCEPTED?"confirm":e===n.q.REQUESTED?"pending":e===n.q.CANCELLED||e===n.q.REJECTED?"reject":e===n.q.COMPLETED||e===n.q.CONFIRMED?"accept":""}getStatusChartmetricsCount(){let e=[0,0,0,0,0],s=["REQUESTED","ACCEPTED","CONFIRMED","REJECTED","CANCELLED"];this.schedulesService.getTutorScheduleCountById(this.tutorId).subscribe(l=>{l.schedule[0].statusMetrics.forEach(i=>{switch(i.status){case"REQUESTED":e[0]=i.count;break;case"ACCEPTED":e[1]=i.count;break;case"CONFIRMED":e[2]=i.count;break;case"REJECTED":e[3]=i.count;break;case"CANCELLED":e[4]=i.count}}),this.data={labels:s,datasets:[{data:e,backgroundColor:["#f39c12","rgb(15 67 183 )","rgba(15, 183, 107)","rgba(242, 17, 54)","rgba(242, 17, 54)"]}]}})}handleLabelClick(e){this.router.navigate(["tutor/schedules"],{queryParams:{status:this.data.labels[e.element.index]}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(T.K),t.Y36(h.F),t.Y36(v.V),t.Y36(c.F0),t.Y36(C.F))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tutor-dashboard"]],decls:45,vars:8,consts:[[1,"row"],[1,"col-md-12","col-lg-4","dash-board-list","blue"],[1,"dash-widget"],[1,"circle-bar"],[1,"icon-col"],[1,"fas","fa-users"],[1,"dash-widget-info"],[1,"col-md-12","col-lg-4","dash-board-list","yellow"],[1,"fas","fa-calendar-check"],[1,"col-md-12","col-lg-4","dash-board-list","pink"],[1,"fas","fa-wallet"],[4,"ngIf"],[1,"col-md-4"],[1,"card-title"],[1,"card"],[1,"card-body"],[1,"chartcard"],["type","pie",3,"data","options","onDataSelect"],[1,"col-md-8"],["class","card p-4",4,"ngIf"],["class","card card-table",4,"ngIf"],[1,"card","card-table"],[1,"table-responsive"],[1,"table","table-hover","table-center","mb-0"],[4,"ngFor","ngForOf"],[1,"table-avatar"],[1,"Time_slot"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"far","fa-eye"],[1,"avatar","avatar-sm","me-2"],["alt","User Image",1,"avatar-img","rounded-circle",3,"src"],[1,"card","p-4"],[1,"text-center"],["class","tutor-initial me-2",4,"ngIf"],[1,"btn","btn-sm","bg-info-light",3,"click"],[1,"tutor-initial","me-2"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"div",6)(7,"h3"),t._uU(8),t.qZA(),t.TgZ(9,"h6"),t._uU(10,"Today Schedules"),t.qZA()()()(),t.TgZ(11,"div",7)(12,"div",2)(13,"div",3)(14,"div",4),t._UZ(15,"i",8),t.qZA()(),t.TgZ(16,"div",6)(17,"h3"),t._uU(18),t.qZA(),t.TgZ(19,"h6"),t._uU(20,"Appointments"),t.qZA()()()(),t.TgZ(21,"div",9)(22,"div",2)(23,"div",3)(24,"div",4),t._UZ(25,"i",10),t.qZA()(),t.TgZ(26,"div",6)(27,"h3"),t._uU(28),t.qZA(),t.TgZ(29,"h6"),t._uU(30,"Total Earned"),t.qZA()()()()(),t.YNc(31,Z,22,1,"div",11),t.TgZ(32,"div",0)(33,"div",12)(34,"h4",13),t._uU(35,"Schedule Metrics"),t.qZA(),t.TgZ(36,"div",14)(37,"div",15)(38,"div",16)(39,"p-chart",17),t.NdJ("onDataSelect",function(i){return s.handleLabelClick(i)}),t.qZA()()()()(),t.TgZ(40,"div",18)(41,"h4"),t._uU(42,"Latest updated schedules"),t.qZA(),t.YNc(43,f,3,0,"div",19),t.YNc(44,x,16,1,"div",20),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(s.todaySchedules&&s.todaySchedules.totalCount||0),t.xp6(10),t.hij(" ",s.tutorSchedulesArray&&(null==s.tutorSchedulesArray?null:s.tutorSchedulesArray.totalDocuments)||0," "),t.xp6(10),t.hij("$ ",s.amount&&s.amount.totalAmount||0,""),t.xp6(3),t.Q6J("ngIf",s.todayScheduleList.length>0),t.xp6(8),t.Q6J("data",s.data)("options",s.options),t.xp6(4),t.Q6J("ngIf",s.tutorLatestUpdates&&0===s.tutorLatestUpdates.length),t.xp6(1),t.Q6J("ngIf",s.tutorLatestUpdates&&0!==s.tutorLatestUpdates.length))},dependencies:[d.sg,d.O5,_.C,d.uU],styles:[".dashboard_status[_ngcontent-%COMP%]{border:1px solid rgba(183,183,183,.05);flex-direction:column;align-items:flex-start;padding:1rem}.rejected[_ngcontent-%COMP%]{background-color:#f211361f;color:#e63c3c}.reject[_ngcontent-%COMP%]{color:#ea580c}H4[_ngcontent-%COMP%], H6[_ngcontent-%COMP%]{color:inherit}ng-container[_ngcontent-%COMP%]{background:#fff;padding:1rem}.REJECTED[_ngcontent-%COMP%]{background-color:#f211361f;color:#e63c3c;border-radius:4px;text-transform:uppercase;padding:7px 16px;font-weight:500;font-size:14px;letter-spacing:.05em}.Time_slot[_ngcontent-%COMP%]{color:#888;display:block;font-size:12px;margin-top:3px}.chartcard[_ngcontent-%COMP%]{min-height:370px;display:flex;align-items:center;justify-content:center}canvas[_ngcontent-%COMP%]{height:400px!important}.card-title[_ngcontent-%COMP%]{margin-bottom:.5rem}.avatar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:cover}.tutor-initial[_ngcontent-%COMP%]{width:40px;border-radius:50%;border:2px solid #009da6;color:#009da6;display:grid;place-items:center;height:40px}"]}),a})()}];let L=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[c.Bz.forChild(y),c.Bz]}),a})();var M=o(4466),O=o(8396);let q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.ez,L,M.m,O.U$,_.S]}),a})()}}]);