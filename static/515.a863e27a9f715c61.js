"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[515],{7914:(p,l,s)=>{s.d(l,{D:()=>c,a:()=>n});const n=["01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},5622:(p,l,s)=>{s.d(l,{q:()=>n,s:()=>c});var n=(()=>{return(d=n||(n={})).REQUESTED="REQUESTED",d.ACCEPTED="ACCEPTED",d.REJECTED="REJECTED",d.CANCELLED="CANCELLED",d.COMPLETED="COMPLETED",d.CONFIRMED="CONFIRMED",n;var d})();const c=[{value:"REQUESTED",label:"Requested"},{value:"ACCEPTED",label:"Accepted"},{value:"REJECTED",label:"Rejected"},{value:"CANCELLED",label:"Cancelled"},{value:"COMPLETED",label:"Completed"},{value:"CONFIRMED",label:"Confirmed"}]},2058:(p,l,s)=>{s.d(l,{K:()=>m});var n=s(4650),c=s(6557),d=s(791);let m=(()=>{class t{constructor(h,v){this.httpDataService=h,this.storageService=v}getLogedinUserDetails(){return this.httpDataService.get(`user/${this.storageService.getDataFromLocalStorage("id")}`)}getUserDetails(h){return this.httpDataService.get(`user/${h}`)}}return t.\u0275fac=function(h){return new(h||t)(n.LFG(c.L),n.LFG(d.V))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9515:(p,l,s)=>{s.r(l),s.d(l,{TutorDashboardModule:()=>I});var n=s(6895),c=s(2912),d=s(5622),m=s(7914),t=s(4650),T=s(2058),h=s(6864),v=s(791),b=s(792),_=s(7861),C=s(2210);function Z(o,i){if(1&o&&(t.TgZ(0,"div")(1,"a",34),t._UZ(2,"img",35),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("src",e.student.photoUrl,t.LSH)}}function D(o,i){if(1&o&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.sharedService.getNameInitials(null==e?null:e.student.firstName,null==e?null:e.student.lastName)," ")}}function E(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"h2",29),t.YNc(3,Z,3,1,"div",18),t.YNc(4,D,2,1,"div",30),t.TgZ(5,"a"),t._uU(6),t.TgZ(7,"span"),t._uU(8),t.qZA()()()(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.TgZ(14,"span",31),t._uU(15),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.navigateToDetailsPage(r._id))}),t._UZ(20,"i",33),t._uU(21," View "),t.qZA()()()}if(2&o){const e=i.$implicit,a=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.student.photoUrl),t.xp6(1),t.Q6J("ngIf",!e.student.photoUrl),t.xp6(2),t.AsE("",e.student.firstName," ",e.student.lastName,""),t.xp6(2),t.Oqu(e.student.email),t.xp6(2),t.Oqu(e.subjects[0].courseName),t.xp6(2),t.hij(" ",t.xi3(13,12,e.slots[0].date,"dd MMM yyyy")," "),t.xp6(3),t.AsE(" ",a.timeValues[e.slots[0].from]," to ",a.timeValues[e.slots[0].to]," "),t.xp6(1),t.Tol(a.statusClass(e.status)),t.xp6(1),t.Oqu(e.status)}}function f(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"h4"),t._uU(3,"Today Schedule List"),t.qZA(),t.TgZ(4,"div",25)(5,"div",16)(6,"div",26)(7,"table",27)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"Tutor"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Course"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Slots"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Action"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,E,22,15,"tr",28),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",e.todayScheduleList)}}function S(o,i){1&o&&(t.TgZ(0,"div",37)(1,"p",38),t._uU(2,"No recent updates"),t.qZA()())}function U(o,i){if(1&o&&(t.TgZ(0,"div")(1,"a",34),t._UZ(2,"img",35),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("src",e.student.photoUrl,t.LSH)}}function y(o,i){if(1&o&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.sharedService.getNameInitials(null==e?null:e.student.firstName,null==e?null:e.student.lastName)," ")}}function A(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"h2",29),t.YNc(3,U,3,1,"div",18),t.YNc(4,y,2,1,"div",30),t.TgZ(5,"a"),t._uU(6),t.TgZ(7,"span"),t._uU(8),t.qZA()()()(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",39)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td",39)(16,"a",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.navigateToStudentSchedules(r._id))}),t._UZ(17,"i",33),t._uU(18," View"),t.qZA()()()}if(2&o){const e=i.$implicit,a=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.student.photoUrl),t.xp6(1),t.Q6J("ngIf",!e.student.photoUrl),t.xp6(2),t.AsE("",e.student.firstName," ",e.student.lastName,""),t.xp6(2),t.Oqu(e.student.email),t.xp6(2),t.Oqu(t.xi3(11,9,e.createdAt,"dd MMM yyyy")),t.xp6(2),t.Tol(a.statusClass(e.status)),t.xp6(2),t.Oqu(e.status)}}function x(o,i){if(1&o&&(t.TgZ(0,"div",25)(1,"div",16)(2,"div",26)(3,"table",27)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Basic Info"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"updated Date"),t.qZA(),t.TgZ(10,"th",39),t._uU(11,"Status"),t.qZA(),t.TgZ(12,"th",39),t._uU(13,"Action"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,A,19,12,"tr",28),t.qZA()()()()()),2&o){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.tutorLatestUpdates)}}const L=[{path:"",component:(()=>{class o{constructor(e,a,u,r,g){this.userService=e,this.schedulesService=a,this.storageService=u,this.router=r,this.sharedService=g,this.amount=[],this.todayScheduleList=[],this.timeValues=m.a,this.filterObject={year:2023},this.years=[2023,2022]}ngOnInit(){this.getUserDetails(),this.tutorId=this.storageService.getDataFromLocalStorage("id"),this.getTutorScheduleCountById(),this.getLatestUpdatedSchedulesBytutorId(),this.getTotalEarned(this.tutorId),this.getTotalTutoringHours(this.tutorId);let e=new Date,a=new Date;a.setDate(e.getDate()-1),this.getTodayScheduleDetails({from:a,to:e}),this.getStatusChartmetricsCount(),this.getPaymentsChartmetricsCount(2023,this.tutorId)}getUserDetails(){this.userService.getLogedinUserDetails().subscribe(e=>{this.userDetails=e.existingUser,this.userService.userDetails=e.existingUser})}getTutorScheduleCountById(){this.schedulesService.getTutorScheduleCountById(this.tutorId).subscribe(e=>{this.tutorSchedulesArray=e.schedule[0]})}getLatestUpdatedSchedulesBytutorId(){this.schedulesService.getLatestUpdatedSchedulesBytutorId(this.tutorId).subscribe(e=>{this.tutorLatestUpdates=e.data})}navigateToStudentSchedules(e){this.router.navigate(["/tutor/schedules/details"],{queryParams:{sid:e}})}getTotalEarned(e){this.schedulesService.getTotalEarned(e).subscribe(a=>{this.amount=a.amount[0]})}getTotalTutoringHours(e){this.schedulesService.getTotalTutoringHours(e).subscribe(a=>{this.totalHoursSpent=a[0].hoursSpent})}getTodayScheduleDetails(e){const a=this.storageService.getDataFromLocalStorage("id");this.schedulesService.getSchedulesBySearchByCriteria({pageNumber:0,pageSize:4,sortField:"",sortOrder:1,studentIds:[],tutorIds:[a],subjects:[],status:"",dateRange:e}).subscribe(r=>{this.todaySchedules=r,this.todayScheduleList=r.data})}navigateToDetailsPage(e){this.router.navigate(["./student/schedules/details"],{queryParams:{sid:e}})}statusClass(e){return e===d.q.ACCEPTED?"confirm":e===d.q.REQUESTED?"pending":e===d.q.CANCELLED||e===d.q.REJECTED?"reject":e===d.q.COMPLETED||e===d.q.CONFIRMED?"accept":""}getStatusChartmetricsCount(){let e=[0,0,0,0,0],a=["REQUESTED","ACCEPTED","CONFIRMED","REJECTED","CANCELLED"];this.schedulesService.getTutorScheduleCountById(this.tutorId).subscribe(u=>{u.schedule[0].statusMetrics.forEach(r=>{switch(r.status){case"REQUESTED":e[0]=r.count;break;case"ACCEPTED":e[1]=r.count;break;case"CONFIRMED":e[2]=r.count;break;case"REJECTED":e[3]=r.count;break;case"CANCELLED":e[4]=r.count}}),this.data={labels:a,datasets:[{data:e,backgroundColor:["#f39c12","rgb(15 67 183 )","rgba(15, 183, 107)","rgba(242, 17, 54)","rgba(242, 17, 54)"]}]}})}handleLabelClick(e){this.router.navigate(["tutor/schedules"],{queryParams:{status:this.data.labels[e.element.index]}})}onSelectYear(e){this.getPaymentsChartmetricsCount(e.value,this.tutorId)}getPaymentsChartmetricsCount(e,a){const r=getComputedStyle(document.documentElement).getPropertyValue("--text-color");this.schedulesService.getTutorPayoutsStatistics(e,this.tutorId).subscribe(g=>{this.basicData={labels:["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Payments",data:g.amount,backgroundColor:["rgba(255, 159, 64, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgb(255, 159, 64)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)"],borderWidth:1}]},this.basicOptions={plugins:{legend:{labels:{color:r}}}}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.K),t.Y36(h.F),t.Y36(v.V),t.Y36(c.F0),t.Y36(b.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tutor-dashboard"]],decls:66,vars:12,consts:[[1,"row"],[1,"col-md-12","col-lg-3","dash-board-list","blue"],[1,"dash-widget"],[1,"circle-bar"],[1,"icon-col"],[1,"fas","fa-users"],[1,"dash-widget-info"],[1,"col-md-12","col-lg-3","dash-board-list","yellow"],[1,"fas","fa-calendar-check"],[1,"col-md-12","col-lg-3","dash-board-list","pink"],[1,"fas","fa-wallet"],[1,"Revenue_chart","me-2"],[1,"card-title"],[1,"form-control-label"],[3,"options","onChange"],[1,"card"],[1,"card-body"],["width","100%","height","500px","type","bar",3,"data","options"],[4,"ngIf"],[1,"col-md-4"],[1,"chartcard"],["type","pie",3,"data","options","onDataSelect"],[1,"col-md-8"],["class","card p-4",4,"ngIf"],["class","card card-table",4,"ngIf"],[1,"card","card-table"],[1,"table-responsive"],[1,"table","table-hover","table-center","mb-0"],[4,"ngFor","ngForOf"],[1,"table-avatar"],["class","tutor-initial me-2",4,"ngIf"],[1,"Time_slot"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"far","fa-eye"],[1,"avatar","avatar-sm","me-2"],["alt","User Image",1,"avatar-img","rounded-circle",3,"src"],[1,"tutor-initial","me-2"],[1,"card","p-4"],[1,"text-danger"],[1,"text-center"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"div",6)(7,"h3"),t._uU(8),t.qZA(),t.TgZ(9,"h6"),t._uU(10,"Today Schedules"),t.qZA()()()(),t.TgZ(11,"div",7)(12,"div",2)(13,"div",3)(14,"div",4),t._UZ(15,"i",8),t.qZA()(),t.TgZ(16,"div",6)(17,"h3"),t._uU(18),t.qZA(),t.TgZ(19,"h6"),t._uU(20,"Appointments"),t.qZA()()()(),t.TgZ(21,"div",9)(22,"div",2)(23,"div",3)(24,"div",4),t._UZ(25,"i",10),t.qZA()(),t.TgZ(26,"div",6)(27,"h3"),t._uU(28),t.qZA(),t.TgZ(29,"h6"),t._uU(30,"Total Earned"),t.qZA()()()(),t.TgZ(31,"div",9)(32,"div",2)(33,"div",3)(34,"div",4),t._UZ(35,"i",10),t.qZA()(),t.TgZ(36,"div",6)(37,"h3"),t._uU(38),t.qZA(),t.TgZ(39,"h6"),t._uU(40,"Total Tutoring Hours"),t.qZA()()()()(),t.TgZ(41,"div")(42,"div",11)(43,"h4",12),t._uU(44,"Revenue"),t.qZA(),t.TgZ(45,"div")(46,"label",13),t._uU(47,"Year"),t.qZA(),t.TgZ(48,"p-dropdown",14),t.NdJ("onChange",function(r){return a.onSelectYear(r)}),t.qZA()()(),t.TgZ(49,"div",15)(50,"div",16),t._UZ(51,"p-chart",17),t.qZA()()(),t.YNc(52,f,22,1,"div",18),t.TgZ(53,"div",0)(54,"div",19)(55,"h4",12),t._uU(56,"Schedule Metrics"),t.qZA(),t.TgZ(57,"div",15)(58,"div",16)(59,"div",20)(60,"p-chart",21),t.NdJ("onDataSelect",function(r){return a.handleLabelClick(r)}),t.qZA()()()()(),t.TgZ(61,"div",22)(62,"h4"),t._uU(63,"Latest updated schedules"),t.qZA(),t.YNc(64,S,3,0,"div",23),t.YNc(65,x,16,1,"div",24),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(a.todaySchedules&&a.todaySchedules.totalCount||0),t.xp6(10),t.hij(" ",a.tutorSchedulesArray&&(null==a.tutorSchedulesArray?null:a.tutorSchedulesArray.totalDocuments)||0," "),t.xp6(10),t.hij("$ ",a.amount&&a.amount.totalAmount||0,""),t.xp6(10),t.hij(" ",a.totalHoursSpent||0," "),t.xp6(10),t.Q6J("options",a.years),t.xp6(3),t.Q6J("data",a.basicData)("options",a.basicOptions),t.xp6(1),t.Q6J("ngIf",a.todayScheduleList.length>0),t.xp6(8),t.Q6J("data",a.data)("options",a.options),t.xp6(4),t.Q6J("ngIf",a.tutorLatestUpdates&&0===a.tutorLatestUpdates.length),t.xp6(1),t.Q6J("ngIf",a.tutorLatestUpdates&&0!==a.tutorLatestUpdates.length))},dependencies:[n.sg,n.O5,_.C,C.Lt,n.uU],styles:[".dashboard_status[_ngcontent-%COMP%]{border:1px solid rgba(183,183,183,.05);flex-direction:column;align-items:flex-start;padding:1rem}.rejected[_ngcontent-%COMP%]{background-color:#f211361f;color:#e63c3c}.reject[_ngcontent-%COMP%]{color:#ea580c}H4[_ngcontent-%COMP%], H6[_ngcontent-%COMP%]{color:inherit}ng-container[_ngcontent-%COMP%]{background:#fff;padding:1rem}.REJECTED[_ngcontent-%COMP%]{background-color:#f211361f;color:#e63c3c;border-radius:4px;text-transform:uppercase;padding:7px 16px;font-weight:500;font-size:14px;letter-spacing:.05em}.Time_slot[_ngcontent-%COMP%]{color:#888;display:block;font-size:12px;margin-top:3px}.chartcard[_ngcontent-%COMP%]{min-height:370px;display:flex;align-items:center;justify-content:center}canvas[_ngcontent-%COMP%]{height:400px!important}.card-title[_ngcontent-%COMP%]{margin-bottom:.5rem}.avatar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:cover}.tutor-initial[_ngcontent-%COMP%]{width:40px;border-radius:50%;border:2px solid #009da6;color:#009da6;display:grid;place-items:center;height:40px}.Revenue_chart[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:none;align-items:end;margin-bottom:.5rem}.p-chart[_ngcontent-%COMP%]{height:500px!important;width:100%!important}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.Bz.forChild(L),c.Bz]}),o})();var O=s(4466),q=s(8396);let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[n.ez,M,O.m,q.U$,_.S,C.kW]}),o})()}}]);