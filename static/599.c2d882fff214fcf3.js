"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[599],{5599:(E,f,c)=>{c.r(f),c.d(f,{CourseModule:()=>z});var g=c(6895),n=c(4006),_=c(8396),m=c(2912),b=c(2887),x=c(7579),e=c(4650),h=c(9886),U=c(6557);let v=(()=>{class r{constructor(t){this.httpDataService=t}getAllCourse(t){return this.httpDataService.get("course",t)}addCourse(t){return this.httpDataService.post("course",t)}updateCourse(t,o){return this.httpDataService.put("course/"+t,o)}deleteCategory(t){return this.httpDataService.delete("course/"+t)}activateCourseById(t){return this.httpDataService.put(`course/activate/${t}`,{})}inactivateCourseById(t){return this.httpDataService.delete(`course/${t}`)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(U.L))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Z=c(7185),S=c(2735),y=c(9147),C=c(2210);function I(r,i){1&r&&(e.TgZ(0,"p",20),e._uU(1," Course is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function M(r,i){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,I,4,0,"p",19),e.qZA()),2&r){const t=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=t.courseForm.get("courseName"))?null:o.hasError("required"))}}function O(r,i){1&r&&(e.TgZ(0,"p",20),e._uU(1," Category is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function w(r,i){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,O,4,0,"p",19),e.qZA()),2&r){const t=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=t.courseForm.get("category"))?null:o.hasError("required"))}}function N(r,i){1&r&&(e.TgZ(0,"p",20),e._uU(1," Description is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function P(r,i){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,N,4,0,"p",19),e.qZA()),2&r){const t=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",null==(o=t.courseForm.get("courseDiscription"))?null:o.hasError("required"))}}function q(r,i){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",21),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.courseImage,e.LSH)}}let A=(()=>{class r{constructor(t,o,a,s,l,u){this.modalRef=t,this.modalService=o,this._courseService=a,this.toastr=s,this.studentProfileService=l,this.categoryService=u}ngOnInit(){this.onClose=new x.x,this.createForm(),this.editValues?._id&&this.patchValues(),this.getAllCategories()}createForm(){this.courseImage="",this.courseForm=new n.cw({id:new n.NI(""),courseName:new n.NI("",[n.kI.required]),courseDiscription:new n.NI("",[n.kI.required]),category:new n.NI("",[n.kI.required]),courseImageUrl:new n.NI("")})}onSubmit(t){t.valid&&(t.value.id?this._courseService.updateCourse(t.value.id,{...t.value,courseImageUrl:this.courseImage}).subscribe(o=>{o.message&&(this.onClose.next(!0),this.modalRef.hide(),this.toastr.success("",o.message))}):this._courseService.addCourse({...t.value,courseImageUrl:this.courseImage}).subscribe(o=>{o.message&&(this.onClose.next(!0),this.modalRef.hide(),this.toastr.success("",o.message))}))}patchValues(){this.courseForm.patchValue({id:this.editValues?._id,courseName:this.editValues?.courseName,category:this.editValues?.category?._id,courseDiscription:this.editValues?.courseDiscription,courseImageUrl:this.editValues?.courseImageUrl}),this.courseImage=this.courseForm.controls.courseImageUrl.value}closePopup(){this.modalRef.hide()}uploadDocs(t){this.courseName=this.courseForm.controls.courseName.value,this.filesData=t.target,this.filesData.files&&(this.fileObj=this.filesData.files[0]),this.studentProfileService.uploadFiletourl(this.fileObj.name,this.fileObj.type,"Course",this.courseName).subscribe(o=>{o?.uploadUrl&&this.updateFileInS3(o.uploadUrl,this.fileObj.type,this.fileObj)})}updateFileInS3(t,o,a){this.studentProfileService.updateFileInS3(t,o,a).subscribe(s=>{const l=t.split("?");this.courseImage=l[0]})}getAllCategories(){this.categoryService.getAllCategories().subscribe(t=>{console.log(t),this.categories=t.data})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.UZ),e.Y36(h.tT),e.Y36(v),e.Y36(Z._W),e.Y36(S.J),e.Y36(y.H))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-update-course"]],decls:34,vars:9,consts:[[1,"modal-body"],[1,"card","m-0"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","courseName","required","",1,"form-control"],[4,"ngIf"],["placeholder","Select Category","formControlName","category","optionLabel","categoryName","optionValue","_id",3,"options"],["formControlName","courseDiscription",1,"form-control"],[1,"form-group","d-flex","gap-1"],["type","file","accept","image/*,jpg,png",2,"display","none",3,"change"],["file",""],[1,"Upload_img",3,"click"],["aria-hidden","true",1,"fa","fa-camera"],[1,"text-end"],["type","button",1,"btn","btn-danger","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","feild-error",4,"ngIf"],[1,"feild-error"],["alt","profile",1,"courseImage",2,"width","100px","height","100px",3,"src"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e._uU(4),e.qZA()(),e.TgZ(5,"div",4)(6,"form",5),e.NdJ("ngSubmit",function(){return o.onSubmit(o.courseForm)}),e.TgZ(7,"div",6)(8,"label"),e._uU(9,"Course"),e.qZA(),e._UZ(10,"input",7),e.YNc(11,M,2,1,"div",8),e.qZA(),e.TgZ(12,"div",6),e._UZ(13,"p-dropdown",9),e.YNc(14,w,2,1,"div",8),e.qZA(),e.TgZ(15,"div",6)(16,"label"),e._uU(17,"Description"),e.qZA(),e._UZ(18,"textarea",10),e.YNc(19,P,2,1,"div",8),e.qZA(),e.TgZ(20,"div",11),e.YNc(21,q,2,1,"div",8),e.TgZ(22,"input",12,13),e.NdJ("change",function(l){return o.uploadDocs(l)}),e.qZA(),e.TgZ(24,"div",14),e.NdJ("click",function(){e.CHM(a);const l=e.MAs(23);return e.KtG(l.click())}),e.TgZ(25,"div"),e._UZ(26,"i",15),e.qZA(),e.TgZ(27,"div"),e._uU(28),e.qZA()()(),e.TgZ(29,"div",16)(30,"button",17),e.NdJ("click",function(){return o.closePopup()}),e._uU(31," Close "),e.qZA(),e.TgZ(32,"button",18),e._uU(33," Submit "),e.qZA()()()()()()}if(2&t){let a,s,l;e.xp6(4),e.hij(" ",null!=o.editValues&&o.editValues._id?"Update Course":"Add Course"," "),e.xp6(2),e.Q6J("formGroup",o.courseForm),e.xp6(5),e.Q6J("ngIf",(null==(a=o.courseForm.get("courseName"))?null:a.invalid)&&((null==(a=o.courseForm.get("courseName"))?null:a.dirty)||(null==(a=o.courseForm.get("courseName"))?null:a.touched))),e.xp6(2),e.Q6J("options",o.categories),e.xp6(1),e.Q6J("ngIf",(null==(s=o.courseForm.get("category"))?null:s.invalid)&&((null==(s=o.courseForm.get("category"))?null:s.dirty)||(null==(s=o.courseForm.get("category"))?null:s.touched))),e.xp6(5),e.Q6J("ngIf",(null==(l=o.courseForm.get("courseDiscription"))?null:l.invalid)&&((null==(l=o.courseForm.get("courseDiscription"))?null:l.dirty)||(null==(l=o.courseForm.get("courseDiscription"))?null:l.touched))),e.xp6(2),e.Q6J("ngIf",o.courseImage),e.xp6(7),e.hij(" ",o.courseImage?"Update Image":"add image"," "),e.xp6(4),e.Q6J("disabled",o.courseForm.invalid)}},dependencies:[g.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,C.Lt],styles:[".feild-error[_ngcontent-%COMP%]{color:#eb8989}.btn-right[_ngcontent-%COMP%]{margin-right:12px!important}.courseImage[_ngcontent-%COMP%]{height:100px;width:100px}.card-body[_ngcontent-%COMP%]{padding-inline:0}.fa-camera[_ngcontent-%COMP%]{font-size:1.5rem}.form-group[_ngcontent-%COMP%]   .Upload_img[_ngcontent-%COMP%]{text-align:center;border:dashed 1px #979797;padding:1rem;flex-direction:column;color:gray;cursor:pointer;flex-grow:1}"]}),r})();var F=c(4986),J=c(4482),D=c(5403),Y=c(805);function k(r,i){if(1&r&&(e.TgZ(0,"tr")(1,"div",21)(2,"h5",22),e._uU(3,"No courses found !!!"),e.qZA()()()),2&r){const t=i.$implicit;e.xp6(1),e.uIk("colspan",null==t?null:t.length)}}function Q(r,i){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Course "),e.qZA(),e.TgZ(3,"th"),e._uU(4," Category "),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Description "),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Active"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Action "),e.qZA()())}function R(r,i){if(1&r&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"uppercase"),e.ALo(3,"uppercase"),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,t.courseName.split("")[0]),"",e.lcZ(3,4,t.courseName.split("")[1])," ")}}function V(r,i){if(1&r&&(e.TgZ(0,"span",35),e._UZ(1,"img",36),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==t?null:t.courseImageUrl,e.LSH)}}function L(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr",23)(1,"td")(2,"span",24),e._uU(3,"Category"),e.qZA(),e.TgZ(4,"div",25),e.YNc(5,R,4,6,"span",26),e.YNc(6,V,2,1,"span",27),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"span",24),e._uU(12,"Discription"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"span",24),e._uU(16,"Active"),e.qZA(),e.TgZ(17,"div",28)(18,"input",29),e.NdJ("change",function(a){const s=e.CHM(t),l=s.$implicit,u=s.rowIndex,p=e.oxw();return e.KtG(p.handleActiveToggle(a,l,u))}),e.qZA(),e.TgZ(19,"label",30),e._uU(20),e.qZA()()(),e.TgZ(21,"td")(22,"span",24),e._uU(23,"Action"),e.qZA(),e.TgZ(24,"div",31)(25,"button",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editCourse(s))}),e._UZ(26,"i",33),e._uU(27," Edit "),e.qZA()()()()}if(2&r){const t=i.$implicit;e.xp6(5),e.Q6J("ngIf",!(null!=t&&t.courseImageUrl)),e.xp6(1),e.Q6J("ngIf",null==t?null:t.courseImageUrl),e.xp6(1),e.hij("",t.courseName," "),e.xp6(2),e.hij(" ",null==t||null==t.category?null:t.category.categoryName," "),e.xp6(4),e.hij(" ",t.courseDiscription," "),e.xp6(5),e.MGl("id","status_",t.courseName,""),e.Q6J("checked",t.isActive),e.xp6(1),e.MGl("for","status_",t.courseName,""),e.xp6(1),e.hij(" ",t.isActive?"Active":"Inactive"," ")}}const $=function(){return[10,25,50]},H=[{path:"",component:(()=>{class r{constructor(t,o,a,s){this.modalService=t,this.toastr=o,this.courseService=a,this.categoryService=s,this.filerObject={},this.loading=!1,this.searchControl=new n.NI}ngOnInit(){this.getAllCourse(this.filerObject),this.getAllCategories(),this.searchControl.valueChanges.pipe(function j(r,i=F.z){return(0,J.e)((t,o)=>{let a=null,s=null,l=null;const u=()=>{if(a){a.unsubscribe(),a=null;const d=s;s=null,o.next(d)}};function p(){const d=l+r,T=i.now();if(T<d)return a=this.schedule(void 0,d-T),void o.add(a);u()}t.subscribe((0,D.x)(o,d=>{s=d,l=i.now(),a||(a=i.schedule(p,r),o.add(a))},()=>{u(),o.complete()},void 0,()=>{s=a=null}))})}(300)).subscribe(t=>{this.filerObject.searchTerm=t,this.getAllCourse(this.filerObject)})}getAllCourse(t){this.courseService.getAllCourse(t).subscribe(o=>{this.loading=!0,o.data.length>0&&(this.course=o.data,this.loading=!1)})}getAllCategories(){this.categoryService.getAllCategories().subscribe(t=>{this.categories=t.data})}onSelectCategory(t){this.filerObject.category=t.value,this.getAllCourse(this.filerObject)}openModal(){this.modalRef=this.modalService.show(A),this.modalRef.content.onClose.subscribe(t=>{t&&this.getAllCourse()})}editCourse(t){this.modalRef=this.modalService.show(A,{initialState:{editValues:t}}),this.modalRef.content.onClose.subscribe(o=>{o&&this.getAllCourse()})}deleteCourse(t){this.modalRef=this.modalService.show(b.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:"Are you sure want to delete?"}}),this.modalRef.content.onClose.subscribe(o=>{o&&this.courseService.deleteCategory(t._id).subscribe(a=>{a.message&&(this.toastr.success("",a.message),this.getAllCourse())})})}handleActiveToggle(t,o,a){this.modalRef=this.modalService.show(b.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Are you sure you want to change the status to ${t.target.checked?"Activate":"Deactivate"}?`}}),this.modalRef.content.onClose.subscribe(p=>{p?t.target.checked?this.courseService.activateCourseById(o._id).subscribe(d=>{this.getAllCourse()}):this.courseService.inactivateCourseById(o._id).subscribe(d=>{this.getAllCourse()}):this.course[a]={...this.course[a]}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.tT),e.Y36(Z._W),e.Y36(v),e.Y36(y.H))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-course"]],decls:28,vars:12,consts:[[1,"page-header"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"input_group"],[1,"form-group"],["type","text","placeholder","Search",1,"form-control",3,"formControl"],["placeholder","Select Category","optionLabel","categoryName","optionValue","_id",3,"options","onChange"],["type","button",1,"btn","btn-primary","btn-lg","me-1",3,"click"],[1,"row"],[1,"col-md-12"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["dataKey","id","styleClass","p-datatable-customers","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay"],["dt",""],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[2,"display","flex","justify-content","center","align-items","center","height","10vh"],[1,"text-danger"],[1,"p-selectable-row"],[1,"p-column-title"],[1,"cource_name"],["class","cource-initial",4,"ngIf"],["class","cource-img",4,"ngIf"],[1,"status-toggle"],["type","checkbox",1,"check",3,"id","checked","change"],[1,"checktoggle",3,"for"],[1,"actions"],[1,"btn","btn-primary","me-2",3,"click"],[1,"fe","fe-pencil"],[1,"cource-initial"],[1,"cource-img"],["alt","",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3",1),e._uU(3,"Course"),e.qZA(),e.TgZ(4,"ul",2)(5,"li",3)(6,"a",4),e._uU(7,"Dashboard"),e.qZA()(),e.TgZ(8,"li",5),e._uU(9,"Course"),e.qZA()()(),e.TgZ(10,"div",6)(11,"div",7),e._UZ(12,"input",8),e.qZA(),e.TgZ(13,"div",7)(14,"p-dropdown",9),e.NdJ("onChange",function(s){return o.onSelectCategory(s)}),e.qZA()(),e.TgZ(15,"button",10),e.NdJ("click",function(){return o.openModal()}),e._uU(16,"Add"),e.qZA()()(),e.TgZ(17,"div",11)(18,"div",12)(19,"div",11)(20,"div",13)(21,"div",14)(22,"div",15)(23,"p-table",16,17),e.YNc(25,k,4,1,"ng-template",18),e.YNc(26,Q,11,0,"ng-template",19),e.YNc(27,L,28,9,"ng-template",20),e.qZA()()()()()()()),2&t&&(e.xp6(6),e.Q6J("routerLink","/tutor/dashboard"),e.xp6(6),e.Q6J("formControl",o.searchControl),e.xp6(2),e.Q6J("options",o.categories),e.xp6(9),e.Q6J("value",o.course)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(11,$))("loading",o.loading)("paginator",!0)("filterDelay",0))},dependencies:[g.O5,m.yS,n.Fj,n.JJ,n.oH,_.iA,Y.jx,C.Lt,g.gd],styles:[".table-overflow[_ngcontent-%COMP%]{overflow-x:hidden}.add-btn-align[_ngcontent-%COMP%]{text-align:right;padding:0 38px 0 0}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width: 960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid #dee2e6}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;display:block;border:0 none!important;width:100%!important;float:left;clear:left;border:0 none}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}.course-card[_ngcontent-%COMP%]{background:transparent}.cource_name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.cource-initial[_ngcontent-%COMP%]{width:40px;border-radius:50%;border:2px solid #009da6;color:#009da6;display:grid;place-items:center;height:40px}.cource-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;border-radius:50%;height:40px}.page-header[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:space-between;align-items:center;flex-wrap:wrap}.input_group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:0}"]}),r})()}];let B=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.Bz.forChild(H),m.Bz]}),r})(),z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,B,n.u5,n.UX,_.U$,C.kW]}),r})()}}]);