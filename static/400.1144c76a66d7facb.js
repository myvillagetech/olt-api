"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[400],{1400:(T,p,o)=>{o.d(p,{B:()=>de});var u=o(2887),_=o(7914),c=(()=>{return(i=c||(c={})).STUDENT="Student",i.TUTOR="Tutor",i.ADMIN="Admin",c;var i})(),d=o(5622),e=o(4650),f=o(2912),v=o(6864),D=o(4946),x=o(7185),b=o(9886),S=o(791),Z=o(792),C=o(2735),r=o(6895),m=o(4006),A=o(5593),U=o(5047),y=o(1493);function E(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._UZ(3,"i",9),e.qZA(),e.TgZ(4,"div",10)(5,"h4",11),e._uU(6),e.qZA(),e.TgZ(7,"p",12),e._uU(8),e.qZA()(),e.TgZ(9,"div",13),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.clearFile())}),e._UZ(10,"i",14),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.hij(" ",null==t.files[0]?null:t.files[0].name," "),e.xp6(2),e.hij(" ",t.formatBytes(null==t.files[0]?null:t.files[0].size)," ")}}let N=(()=>{class i{constructor(){this.updatedFilesDescription=new e.vpe,this.value=!1,this.files=[]}onFileDropped(t){this.prepareFilesList(t)}ngOnChanges(t){t.clearAttachments.currentValue&&(this.files=[])}clearFiles(){this.files=[]}fileBrowseHandler(t){this.prepareFilesList(t)}deleteFile(t){this.files.splice(t,1);const n=new DataTransfer;for(let l=0;l<this.filesEvent.target.files.length;l++){const a=this.filesEvent.target.files[l];t!==l&&n.items.add(a)}this.filesEvent.target.files=n.files,this.updatedFilesDescription.emit(this.files)}prepareFilesList(t){this.files=t?.target.files,this.updatedFilesDescription.emit(this.files),this.filesEvent=t}formatBytes(t,n){if(0===t)return"0 Bytes";const a=n<=0?0:n||2,h=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,h)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][h]}clearFile(){this.files=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fileuploader"]],inputs:{value:"value",clearAttachments:"clearAttachments"},outputs:{updatedFilesDescription:"updatedFilesDescription"},features:[e.TTD],decls:11,vars:1,consts:[["appDnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef","accept","application/pdf,application/vnd.ms-excel, image/gif, image/jpeg, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword application/vnd.ms-powerpoint",3,"change"],["fileDropRef",""],["aria-hidden","true",1,"fa","fa-upload"],["for","fileDropRef"],["class","files-list",4,"ngIf"],[1,"files-list"],[1,"single-file"],[1,"file-icon",2,"width","50px"],["aria-hidden","true",1,"fa","fa-file"],[1,"info"],[1,"name"],[1,"size"],[1,"delete",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("fileDropped",function(a){return n.onFileDropped(a)}),e.TgZ(1,"input",1,2),e.NdJ("change",function(a){return n.fileBrowseHandler(a)}),e.qZA(),e._UZ(3,"i",3),e.TgZ(4,"h3"),e._uU(5,"Drag and drop file here"),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"or"),e.qZA(),e.TgZ(8,"label",4),e._uU(9,"Browse for file"),e.qZA()(),e.YNc(10,E,11,2,"div",5)),2&t&&(e.xp6(10),e.Q6J("ngIf",n.files.length>0))},dependencies:[r.O5],styles:[".container[_ngcontent-%COMP%]{padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:0 auto;background-color:#fff}input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0;cursor:pointer}label[_ngcontent-%COMP%]{color:#fff;border-radius:21.5px;background-color:#db202f;padding:8px 16px}h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem;background-color:#fff}.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end;display:flex;flex-grow:1}.name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.info[_ngcontent-%COMP%]{width:100%}"]}),i})();function q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ul",40)(1,"li",41)(2,"a",42),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.navigateToBackPages("dashboard"))}),e._uU(3,"Dashboard"),e.qZA()(),e.TgZ(4,"li",41)(5,"a",42),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.navigateToBackPages("schedules"))}),e._uU(6,"Schedules"),e.qZA()(),e.TgZ(7,"li",43),e._uU(8,"Schedule Details"),e.qZA()()}}function I(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ul",40)(1,"li",41)(2,"a",42),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.navigateToBackPages("dashboard"))}),e._uU(3,"Dashboard"),e.qZA()(),e.TgZ(4,"li",41)(5,"a",42),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.navigateToPayouts("payout"))}),e._uU(6,"Payouts"),e.qZA()(),e.TgZ(7,"li",43),e._uU(8,"Schedule Details"),e.qZA()()}}function J(i,s){if(1&i&&(e.TgZ(0,"p",47),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.tutorDetails.title," ")}}function w(i,s){if(1&i&&(e.TgZ(0,"p",47),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.tutorDetails.description," ")}}function M(i,s){if(1&i&&(e.TgZ(0,"div",49)(1,"p",50),e._uU(2,"Contact Address"),e.qZA(),e.TgZ(3,"div",51)(4,"p",52),e._UZ(5,"i",53),e._uU(6),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.tutorDetails.address," ")}}function F(i,s){if(1&i&&(e.TgZ(0,"div",44)(1,"h4",45),e._uU(2),e.qZA(),e.YNc(3,J,2,1,"p",46),e.YNc(4,w,2,1,"p",46),e.TgZ(5,"p",47),e._uU(6),e.qZA(),e.YNc(7,M,7,1,"div",48),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.AsE(" ",t.displayDetails.firstName," ",t.displayDetails.lastName," "),e.xp6(1),e.Q6J("ngIf","student"===t.logedinUserRole),e.xp6(1),e.Q6J("ngIf","student"===t.logedinUserRole),e.xp6(2),e.hij(" ",t.displayDetails.email," "),e.xp6(1),e.Q6J("ngIf",t.isTutor||"admin"===t.logedinUserRole)}}function k(i,s){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.scheduleDetails?null:t.scheduleDetails.rejectedNote," ")}}function P(i,s){if(1&i&&(e.TgZ(0,"div",56)(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,k,2,1,"p",33),e.TgZ(4,"span",57),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Tol(t.statusClass(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.hij(" ",null==t.scheduleDetails?null:t.scheduleDetails.status," "),e.xp6(1),e.Q6J("ngIf","CANCELLED"===(null==t.scheduleDetails?null:t.scheduleDetails.status)||"REJECTED"===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(2),e.hij("$",t.tutorDetails.hourlyRate," / Hour")}}function R(i,s){if(1&i&&(e.TgZ(0,"div",54),e.YNc(1,P,6,5,"div",55),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.scheduleDetails)}}function Q(i,s){if(1&i&&(e.TgZ(0,"div",54)(1,"h3"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Tol(t.statusClass(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.hij(" ",null==t.scheduleDetails?null:t.scheduleDetails.status," ")}}function L(i,s){if(1&i&&(e.TgZ(0,"div",54)(1,"h4",58),e._uU(2,"Total Amount Be Paid "),e.qZA(),e.TgZ(3,"h1",59),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij("$ ",t.totalAmountTobePaid,"")}}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2,"Total Amount"),e.qZA(),e.TgZ(3,"p-inputNumber",61),e.NdJ("ngModelChange",function(l){e.CHM(t);const a=e.oxw(2);return e.KtG(a.totalAmountTobePaid=l)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.totalAmountTobePaid)}}function O(i,s){if(1&i&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Total Amount To be Paid "),e.qZA(),e.TgZ(3,"h3",62),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" $",null!=t.scheduleDetails&&t.scheduleDetails.amount?null==t.scheduleDetails?null:t.scheduleDetails.amount:t.totalAmountTobePaid," ")}}function B(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"a",63),e._uU(2,"Start Meeting"),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("href",t.scheduleDetails.meetingStartUrl,e.LSH)}}function j(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",64),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.acceptSchedule(l.statusList.ACCEPTED))}),e._uU(2,"Accept"),e.qZA(),e.TgZ(3,"button",65),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateSchedule(l.statusList.REJECTED))}),e._uU(4,"Reject"),e.qZA(),e.BQk()}}function H(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",66),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateSchedule(l.statusList.CANCELLED))}),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",67),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateSchedule(l.statusList.REJECTED))}),e._uU(4,"Reject"),e.qZA(),e.BQk()}}function K(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",66),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.acceptSchedule(l.statusList.ACCEPTED))}),e._uU(2,"Accept"),e.qZA(),e.TgZ(3,"button",68),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateSchedule(l.statusList.CANCELLED))}),e._uU(4,"Cancel"),e.qZA(),e.BQk()}}function G(i,s){if(1&i&&(e.TgZ(0,"div",7)(1,"div",25)(2,"h4"),e._uU(3,"Amount and Actions"),e.qZA()(),e.TgZ(4,"div",8)(5,"div",60),e.YNc(6,Y,4,1,"div",33),e.YNc(7,O,5,1,"div",33),e.TgZ(8,"div"),e.YNc(9,B,3,1,"ng-container",33),e.qZA(),e.TgZ(10,"div"),e.YNc(11,j,5,0,"ng-container",33),e.YNc(12,H,5,0,"ng-container",33),e.YNc(13,K,5,0,"ng-container",33),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.statusList.REQUESTED===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.Q6J("ngIf",t.statusList.REQUESTED!==(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(2),e.Q6J("ngIf",null==t.scheduleDetails?null:t.scheduleDetails.paymentId),e.xp6(2),e.Q6J("ngIf",t.statusList.REQUESTED===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.Q6J("ngIf",t.statusList.ACCEPTED===(null==t.scheduleDetails?null:t.scheduleDetails.status)),e.xp6(1),e.Q6J("ngIf",t.statusList.REJECTED===(null==t.scheduleDetails?null:t.scheduleDetails.status))}}function $(i,s){1&i&&(e.TgZ(0,"li",18)(1,"a",69),e._uU(2,"Notes"),e.qZA()())}function z(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"a",63),e._uU(2,"Join here"),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("href",t.scheduleDetails.meetingLink,e.LSH)}}function V(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.navigateToPayment())}),e._uU(1,"Procced To Payment"),e.qZA()}}function W(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",68),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateSchedule(l.statusList.CANCELLED))}),e._uU(1,"Cancel Schedule"),e.qZA()}}function X(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateSchedule(l.statusList.REQUESTED))}),e._uU(1,"Request Schedule"),e.qZA()}}function ee(i,s){if(1&i&&(e.TgZ(0,"div",7)(1,"div",25)(2,"h4"),e._uU(3,"Amount and Actions"),e.qZA()(),e.TgZ(4,"div",8)(5,"div",60)(6,"div")(7,"h4"),e._uU(8,"Total Amount To be Paid"),e.qZA(),e.TgZ(9,"h3",62),e._uU(10),e.qZA()(),e.TgZ(11,"div"),e.YNc(12,z,3,1,"ng-container",33),e.qZA(),e.TgZ(13,"div"),e.YNc(14,V,2,0,"button",70),e.YNc(15,W,2,0,"button",71),e.YNc(16,X,2,0,"button",72),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(10),e.hij(" $ ",null!=t.scheduleDetails&&t.scheduleDetails.amount?null==t.scheduleDetails?null:t.scheduleDetails.amount:t.totalAmountTobePaid," "),e.xp6(2),e.Q6J("ngIf",null==t.scheduleDetails?null:t.scheduleDetails.paymentId),e.xp6(2),e.Q6J("ngIf",(null==t.scheduleDetails?null:t.scheduleDetails.status)===t.statusList.ACCEPTED),e.xp6(1),e.Q6J("ngIf",(null==t.scheduleDetails?null:t.scheduleDetails.status)!==t.statusList.CANCELLED),e.xp6(1),e.Q6J("ngIf",(null==t.scheduleDetails?null:t.scheduleDetails.status)===t.statusList.CANCELLED)}}function te(i,s){if(1&i&&(e.TgZ(0,"div",77)(1,"div")(2,"h5"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(e.xi3(4,3,t.date,"MMM d, y")),e.xp6(3),e.AsE(" ",n.timeValues[t.from]," - ",n.timeValues[t.to]," ")}}function ie(i,s){if(1&i&&(e.TgZ(0,"div",75),e.YNc(1,te,7,6,"div",76),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.scheduleDetails.slots)}}function ne(i,s){1&i&&e._UZ(0,"hr")}function le(i,s){if(1&i&&(e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p",80),e._uU(4),e.qZA(),e.YNc(5,ne,1,0,"hr",33),e.qZA()),2&i){const t=s.$implicit,n=s.last;e.xp6(2),e.Oqu(t.courseName),e.xp6(2),e.Oqu(t.courseDiscription),e.xp6(1),e.Q6J("ngIf",!n)}}function se(i,s){if(1&i&&(e.TgZ(0,"div",78)(1,"h4",26),e._uU(2,"Course Details"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,le,6,3,"div",79),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.scheduleDetails.subjects)}}function ae(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",81)(1,"div",7)(2,"div",82)(3,"label",83),e._uU(4,"Notes"),e.qZA(),e.TgZ(5,"textarea",84),e.NdJ("ngModelChange",function(l){e.CHM(t);const a=e.oxw();return e.KtG(a.notes=l)}),e.qZA()(),e.TgZ(6,"div",85)(7,"button",86),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.saveNotes())}),e._uU(8," Save "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.notes),e.xp6(2),e.Q6J("disabled",!t.notes)}}function oe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",25)(2,"h4"),e._uU(3,"Add Attachments :"),e.qZA()(),e.TgZ(4,"div",8)(5,"app-fileuploader",87),e.NdJ("updatedFilesDescription",function(l){e.CHM(t);const a=e.oxw();return e.KtG(a.updatedFilesDescription(l))}),e.qZA(),e.TgZ(6,"div",88)(7,"button",89),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.uploadDocument())}),e._uU(8," uploadDocument "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("clearAttachments",t.clearAttachments),e.xp6(2),e.Q6J("disabled",0==t.fileAttachmments.length)}}function ce(i,s){if(1&i&&(e.TgZ(0,"div",90)(1,"a",63),e._UZ(2,"i",91),e.TgZ(3,"div"),e._uU(4),e.qZA()()()),2&i){const t=s.$implicit;e.xp6(1),e.s9C("href",t.url,e.LSH),e.xp6(3),e.Oqu(t.name)}}let de=(()=>{class i{constructor(t,n,l,a,g,h,ue,re,he,pe){this.router=t,this.activatedRoute=n,this.sharedSchedulesService=l,this.studentSchedulesService=a,this.toastrService=g,this.modalService=h,this.SchedulesService=ue,this.storageService=re,this.sharedService=he,this.studentProfileService=pe,this.scheduleId="",this.timeValues=_.a,this.statusList=d.q,this.logedinUserRole="tutor",this.isTutor=!1,this.slots=[],this.totalAmountTobePaid=0,this.visible=!1,this.fileAttachmments=[],this.attachments=[]}ngOnInit(){const t=this.storageService.getDataFromLocalStorage("role");this.logedinUserRole=t===c.TUTOR?"tutor":t===c.ADMIN?"admin":"student",this.isTutor=t===c.TUTOR,this.activatedRoute.queryParams.subscribe(n=>{this.scheduleId=n.sid}),this.scheduleId&&""!==this.scheduleId&&this.getSchedulesDetailsByScheduleId()}getSchedulesDetailsByScheduleId(){this.sharedSchedulesService.getSchedulesByScheduleId(this.scheduleId).subscribe(t=>{this.scheduleDetails=t?.schedule,this.notes=t.schedule.notes,this.tutorDetails=t?.schedule?.tutor[0],this.tutorId=this.tutorDetails._id,this.displayDetails="student"===this.logedinUserRole?t?.schedule?.tutor[0]:t?.schedule?.student[0],this.slots=t?.schedule?.slots,this.calculateTotalAmount()})}statusClass(t){return t===d.q.ACCEPTED?"confirm":t===d.q.REQUESTED?"pending":t===d.q.CANCELLED||t===d.q.REJECTED?"reject":t===d.q.COMPLETED||t===d.q.CONFIRMED?"accept":""}navigateToPayment(){this.studentSchedulesService.updateSelectedScheduleDetails(this.scheduleDetails),this.studentSchedulesService.updateAmount(this.scheduleDetails.amount),this.router.navigate(["/payment-page"])}updateSchedule(t){this.action=t,"CANCELLED"==t&&(this.message="Reason to Cancel Schedule",this.visible=!0),"REJECTED"==t&&(this.message="Reason to Reject Schedule",this.visible=!0),"REQUESTED"===t&&this.requestSchedule()}cancelOrRejectScheduleReason(){this.visible=!1;const t={id:this.scheduleDetails._id,reason:this.reason};"CANCELLED"==this.action&&(this.SchedulesService.cancelSchedule(t).subscribe(),this.getSchedulesDetailsByScheduleId()),"REJECTED"==this.action&&(this.SchedulesService.rejectSchedule(t).subscribe(),this.getSchedulesDetailsByScheduleId()),this.reason=""}acceptSchedule(t){const n={id:this.scheduleDetails._id,amount:this.totalAmountTobePaid};this.modalRef=this.modalService.show(u.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Processed with Accepting the schedule with $${this.totalAmountTobePaid} ?`}}),this.modalRef.content.onClose.subscribe(l=>{l&&this.SchedulesService.updateAcceptStatus(n).subscribe(a=>{this.toastrService.success(a.message),this.getSchedulesDetailsByScheduleId()},a=>{this.toastrService.error(a.error.message??"unable to update! Please try again later")})})}navigateToBackPages(t){this.router.navigate([`/${this.logedinUserRole}/${t}`])}calculateTotalAmount(){let t=0;for(let n=0;n<this.slots.length;n++)t+=(this.slots[n].to-this.slots[n].from)/2*this.tutorDetails.hourlyRate;this.totalAmountTobePaid=t}navigateToPayouts(t){this.router.navigate([`/${this.logedinUserRole}/${t}`])}editSchedule(){this.router.navigate(["./student/courses/schedule"],{queryParams:{id:this.tutorId,sid:this.scheduleDetails._id}})}requestSchedule(){this.modalRef=this.modalService.show(u.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:"Are you sure to Request this schedule again"}}),this.modalRef.content.onClose.subscribe(t=>{t&&this.SchedulesService.requestSchedule(this.scheduleDetails._id).subscribe(n=>{this.toastrService.success(n.message),this.getSchedulesDetailsByScheduleId()},n=>{this.toastrService.error(n.error.message??"unable to update! Please try again later")})})}saveNotes(){this.SchedulesService.addNotes(this.scheduleDetails._id,{notes:this.notes}).subscribe(t=>{this.getSchedulesDetailsByScheduleId()})}updatedFilesDescription(t){this.fileAttachmments=t}uploadDocument(){this.studentProfileService.uploadFiletourl(this.fileAttachmments[0].name,this.fileAttachmments[0].type,"Schedule-attchemet",this.scheduleId).subscribe(n=>{if(n?.uploadUrl){const l=n.uploadUrl.split("?");this.attachments=[{url:l[0],name:this.fileAttachmments[0].name,type:this.fileAttachmments[0].type,size:this.fileAttachmments[0].size}],this.studentProfileService.updateFileInS3(n.uploadUrl,this.fileAttachmments[0].type,this.fileAttachmments[0]).subscribe(a=>{this.saveAttachments()})}})}saveAttachments(){this.SchedulesService.addAttachments(this.scheduleDetails._id,this.attachments).subscribe(t=>{this.clearAttachments=[],this.fileAttachmments=[],this.getSchedulesDetailsByScheduleId()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.F0),e.Y36(f.gz),e.Y36(v.F),e.Y36(D.g),e.Y36(x._W),e.Y36(b.tT),e.Y36(v.F),e.Y36(S.V),e.Y36(Z.F),e.Y36(C.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-schedule-details"]],decls:66,vars:20,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],["class","breadcrumb",4,"ngIf"],[1,"card","mb-2"],[1,"content","mx-2"],[1,"card"],[1,"card-body"],[1,"mentor-widget"],[1,"user-info-left","align-items-center"],[1,"mentor-img","d-flex","flex-wrap","justify-content-center"],[1,"pro-avatar"],["class","user-info-cont",4,"ngIf"],["class","user-info-right d-flex align-items-end flex-wrap",4,"ngIf"],["class","card",4,"ngIf"],[1,"profile-menu"],[1,"nav","nav-tabs","nav-tabs-solid"],[1,"nav-item"],["data-bs-toggle","tab","data-bs-target","#about","id","",1,"nav-link","active"],["class","nav-item",4,"ngIf"],["data-bs-toggle","tab","data-bs-target","#pass",1,"nav-link"],[1,"tab-content","profile-tab-cont"],["id","about",1,"tab-pane","fade","show","active"],[1,"col-lg-12"],[1,"card-header"],[1,"widget-title"],["class","d-flex wrap",4,"ngIf"],[1,"card-body","custom-border-card","pb-0"],["class","widget about-widget custom-about mb-0",4,"ngIf"],["class","tab-pane fade","id","notes",4,"ngIf"],["id","pass",1,"tab-pane","fade"],[1,"card","mt-2"],[4,"ngIf"],[1,"d-flex","gap-2"],["class","attachments",4,"ngFor","ngForOf"],[3,"header","modal","draggable","visible","visibleChange"],["cols","100","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-lg","mt-2",3,"click"],[1,"breadcrumb"],[1,"breadcrumb-item","cursor"],[3,"click"],[1,"breadcrumb-item","active"],[1,"user-info-cont"],[1,"usr-name"],["class","mentor-type",4,"ngIf"],[1,"mentor-type"],["class","mentor-action",4,"ngIf"],[1,"mentor-action"],[1,"mentor-type","social-title"],[1,"mentor-details","m-0"],[1,"user-location","m-0"],[1,"fas","fa-map-marker-alt"],[1,"user-info-right","d-flex","align-items-end","flex-wrap"],["class","hireme-btn text-center",4,"ngIf"],[1,"hireme-btn","text-center"],[1,"hire-rate","mt-2"],[1,"label-color"],[1,"total-amount"],[1,"d-flex","justify-content-between"],["inputId","integeronly",3,"ngModel","ngModelChange"],[2,"color","green"],["target","_blank",3,"href"],["pButton","","type","button",1,"btn","btn-primary",3,"click"],["pButton","","type","button",1,"btn","btn-danger","btn-lg","m-1",3,"click"],["type","button",1,"btn","btn-primary","btn-lg","me-1",3,"click"],["type","button",1,"btn","btn-danger","btn-lg",3,"click"],["type","button",1,"btn","btn-danger","btn-lg","m-1",3,"click"],["data-bs-toggle","tab","data-bs-target","#notes",1,"nav-link"],["type","button","class","btn btn-primary btn-lg m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-danger btn-lg m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-warning btn-lg m-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-lg","m-1",3,"click"],["type","button",1,"btn","btn-warning","btn-lg","m-1",3,"click"],[1,"d-flex","wrap"],["class","accept m-1 p-2",4,"ngFor","ngForOf"],[1,"accept","m-1","p-2"],[1,"widget","about-widget","custom-about","mb-0"],[4,"ngFor","ngForOf"],[1,"mb-2"],["id","notes",1,"tab-pane","fade"],[1,"form-group"],[1,"form-control-label"],["type","text","rows","5","placeholder","Take Notes Here",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-end","mb-2"],[1,"btn","btn-lg","btn-primary",3,"disabled","click"],[3,"clearAttachments","updatedFilesDescription"],[1,"container","text-end","mt-2","p-0"],[1,"btn","btn-primary","btn-lg",3,"disabled","click"],[1,"attachments"],["aria-hidden","true",1,"fa","fa-file"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Schedule Details"),e.qZA(),e.YNc(5,q,9,0,"ul",4),e.YNc(6,I,9,0,"ul",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div")(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),e._uU(16),e.qZA()(),e.YNc(17,F,8,6,"div",13),e.qZA(),e.YNc(18,R,2,1,"div",14),e.YNc(19,Q,3,3,"div",14),e.YNc(20,L,5,1,"div",14),e.qZA()()(),e.TgZ(21,"div"),e.YNc(22,G,14,6,"div",15),e.TgZ(23,"div",16)(24,"ul",17)(25,"li",18)(26,"a",19),e._uU(27,"About"),e.qZA()(),e.YNc(28,$,3,0,"li",20),e.TgZ(29,"li",18)(30,"a",21),e._uU(31,"Attachments"),e.qZA()()()(),e.TgZ(32,"div",22)(33,"div",23)(34,"div",1)(35,"div",24)(36,"div",7)(37,"div",8),e.YNc(38,ee,17,5,"div",15),e.TgZ(39,"div",7)(40,"div",25)(41,"h4",26),e._uU(42,"Slot Details"),e.qZA()(),e.TgZ(43,"div",8),e.YNc(44,ie,2,1,"div",27),e.qZA()(),e.TgZ(45,"div",5)(46,"div",28),e.YNc(47,se,5,1,"div",29),e.qZA()()()()()()(),e.YNc(48,ae,9,2,"div",30),e.TgZ(49,"div",31)(50,"div",32),e.YNc(51,oe,9,2,"div",33),e.TgZ(52,"div",32)(53,"div",25)(54,"h4"),e._uU(55,"Attachments"),e.qZA()(),e.TgZ(56,"div",8)(57,"div",34),e.YNc(58,ce,5,2,"div",35),e.qZA()()()()()()()()()(),e.TgZ(59,"p-dialog",36),e.NdJ("visibleChange",function(a){return n.visible=a}),e.TgZ(60,"div")(61,"div")(62,"textarea",37),e.NdJ("ngModelChange",function(a){return n.reason=a}),e.qZA()(),e.TgZ(63,"div",38)(64,"button",39),e.NdJ("click",function(){return n.cancelOrRejectScheduleReason()}),e._uU(65,"Confirm"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf","admin"!==n.logedinUserRole),e.xp6(1),e.Q6J("ngIf","admin"===n.logedinUserRole),e.xp6(10),e.hij(" ",n.sharedService.getNameInitials(null==n.displayDetails?null:n.displayDetails.firstName,null==n.displayDetails?null:n.displayDetails.lastName)," "),e.xp6(1),e.Q6J("ngIf",n.displayDetails),e.xp6(1),e.Q6J("ngIf","student"===n.logedinUserRole),e.xp6(1),e.Q6J("ngIf",n.isTutor&&n.scheduleDetails),e.xp6(1),e.Q6J("ngIf","admin"===n.logedinUserRole),e.xp6(2),e.Q6J("ngIf",n.isTutor),e.xp6(6),e.Q6J("ngIf",!n.isTutor),e.xp6(10),e.Q6J("ngIf","student"===n.logedinUserRole),e.xp6(6),e.Q6J("ngIf",n.scheduleDetails),e.xp6(3),e.Q6J("ngIf",n.scheduleDetails),e.xp6(1),e.Q6J("ngIf",!n.isTutor),e.xp6(3),e.Q6J("ngIf",n.isTutor),e.xp6(7),e.Q6J("ngForOf",n.scheduleDetails.attachments),e.xp6(1),e.Q6J("header",n.message)("modal",!0)("draggable",!1)("visible",n.visible),e.xp6(3),e.Q6J("ngModel",n.reason))},dependencies:[r.sg,r.O5,m.Fj,m.JJ,m.On,A.Hq,U.Rn,y.V,N,r.uU],styles:[".cursor[_ngcontent-%COMP%]{cursor:pointer}.label-color[_ngcontent-%COMP%]{color:gray}.total-amount[_ngcontent-%COMP%]{color:#0a4d0a}.attachments[_ngcontent-%COMP%]{min-width:200px;padding:1rem;box-shadow:0 10px 30px #181c210d;border-radius:10px;display:flex;flex-direction:column;align-items:center;gap:.5rem;text-align:center}.attachments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem;margin-top:.5rem;color:#789}"]}),i})()},4946:(T,p,o)=>{o.d(p,{g:()=>_});var u=o(4650);let _=(()=>{class c{constructor(){this.amountToBePaid=0}updateSelectedScheduleDetails(e){this.selectedScheduleDetails=e}updateAmount(e){this.amountToBePaid=e}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);